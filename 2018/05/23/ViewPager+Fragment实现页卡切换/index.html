<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Android," />










<meta name="description" content="现在很多的APP都是这种ui设计模式，在实际开发中经常使用，所以以前我也写过类似的，但基本都是拿来主义，现在正好又遇到了，也不是很复杂，所以就试着自己写一个。　　首先是Activity的布局代码： 　　 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525">
<meta name="keywords" content="Android">
<meta property="og:type" content="article">
<meta property="og:title" content="ViewPager+Fragment实现页卡切换">
<meta property="og:url" content="http://yoursite.com/2018/05/23/ViewPager+Fragment实现页卡切换/index.html">
<meta property="og:site_name" content="一个写代码的胖子">
<meta property="og:description" content="现在很多的APP都是这种ui设计模式，在实际开发中经常使用，所以以前我也写过类似的，但基本都是拿来主义，现在正好又遇到了，也不是很复杂，所以就试着自己写一个。　　首先是Activity的布局代码： 　　 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://img.my.csdn.net/uploads/201605/13/1463131384_2679.gif">
<meta property="og:updated_time" content="2018-05-26T14:12:02.651Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ViewPager+Fragment实现页卡切换">
<meta name="twitter:description" content="现在很多的APP都是这种ui设计模式，在实际开发中经常使用，所以以前我也写过类似的，但基本都是拿来主义，现在正好又遇到了，也不是很复杂，所以就试着自己写一个。　　首先是Activity的布局代码： 　　 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525">
<meta name="twitter:image" content="http://img.my.csdn.net/uploads/201605/13/1463131384_2679.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/05/23/ViewPager+Fragment实现页卡切换/"/>





  <title>ViewPager+Fragment实现页卡切换 | 一个写代码的胖子</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一个写代码的胖子</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archives"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/23/ViewPager+Fragment实现页卡切换/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="一个写代码的胖子">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mouse.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一个写代码的胖子">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">ViewPager+Fragment实现页卡切换</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T21:27:46+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/2018/05/23/ViewPager+Fragment实现页卡切换/" class="leancloud_visitors" data-flag-title="ViewPager+Fragment实现页卡切换">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://img.my.csdn.net/uploads/201605/13/1463131384_2679.gif" alt="这里写图片描述"><br>　　现在很多的APP都是这种ui设计模式，在实际开发中经常使用，所以以前我也写过类似的，但基本都是拿来主义，现在正好又遇到了，也不是很复杂，所以就试着自己写一个。<br>　　首先是Activity的布局代码：
　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;</span><br><span class="line">    tools:context=&quot;com.sy.callme.activities.MainActivity&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v4.view.ViewPager</span><br><span class="line">        android:id=&quot;@+id/vp_main_content&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;0dp&quot;</span><br><span class="line">        android:layout_weight=&quot;10&quot;&gt;&lt;/android.support.v4.view.ViewPager&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:id=&quot;@+id/ll_main_menu&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;0dp&quot;</span><br><span class="line">        android:layout_weight=&quot;1&quot;</span><br><span class="line">        android:background=&quot;#EEEEEE&quot;</span><br><span class="line">        android:gravity=&quot;center&quot;</span><br><span class="line">        android:orientation=&quot;horizontal&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_main_main1&quot;</span><br><span class="line">            android:layout_width=&quot;0dp&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_weight=&quot;1&quot;</span><br><span class="line">            android:drawableTop=&quot;@mipmap/main&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;@string/main&quot;</span><br><span class="line">            android:textColor=&quot;#000000&quot;</span><br><span class="line">            android:textSize=&quot;10sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_main_main2&quot;</span><br><span class="line">            android:layout_width=&quot;0dp&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_weight=&quot;1&quot;</span><br><span class="line">            android:drawableTop=&quot;@mipmap/main&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;@string/map&quot;</span><br><span class="line">            android:textColor=&quot;#000000&quot;</span><br><span class="line">            android:textSize=&quot;10sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_main_main3&quot;</span><br><span class="line">            android:layout_width=&quot;0dp&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_weight=&quot;1&quot;</span><br><span class="line">            android:drawableTop=&quot;@mipmap/main&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;@string/order&quot;</span><br><span class="line">            android:textColor=&quot;#000000&quot;</span><br><span class="line">            android:textSize=&quot;10sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_main_main4&quot;</span><br><span class="line">            android:layout_width=&quot;0dp&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_weight=&quot;1&quot;</span><br><span class="line">            android:drawableTop=&quot;@mipmap/main&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;@string/me&quot;</span><br><span class="line">            android:textColor=&quot;#000000&quot;</span><br><span class="line">            android:textSize=&quot;10sp&quot; /&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>
<p>　　布局很简单就是上面一个viewpager，下面一个LinnearLayout，LinnearLayout里按权重放了四个TextView。<br>　　在Activity的onCreate里我写了这几个方法，看名字就能看出来，分别是用来初始化控件、数据和事件的。
　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    initView();</span><br><span class="line">    initData();</span><br><span class="line">    initEvent();</span><br><span class="line"></span><br><span class="line">    vp_content.setCurrentItem(2);</span><br><span class="line">    vp_content.setCurrentItem(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　在initView方法里初始化TextView和fragment，并把它们放到list集合中。
　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">private void initView() &#123;</span><br><span class="line">       setContentView(R.layout.activity_main);</span><br><span class="line">       vp_content = (ViewPager) findViewById(R.id.vp_main_content);</span><br><span class="line">       tv_main1 = (TextView) findViewById(R.id.tv_main_main1);</span><br><span class="line">       tv_main2 = (TextView) findViewById(R.id.tv_main_main2);</span><br><span class="line">       tv_main3 = (TextView) findViewById(R.id.tv_main_main3);</span><br><span class="line">       tv_main4 = (TextView) findViewById(R.id.tv_main_main4);</span><br><span class="line">       tvList = new ArrayList&lt;TextView&gt;();</span><br><span class="line">       tvList.add(tv_main1);</span><br><span class="line">       tvList.add(tv_main2);</span><br><span class="line">       tvList.add(tv_main3);</span><br><span class="line">       tvList.add(tv_main4);</span><br><span class="line">       MainFragment1 fragment1 = new MainFragment1();</span><br><span class="line">       MainFragment2 fragment2 = new MainFragment2();</span><br><span class="line">       MainFragment3 fragment3 = new MainFragment3();</span><br><span class="line">       MainFragment4 fragment4 = new MainFragment4();</span><br><span class="line">       fragmentList = new ArrayList&lt;Fragment&gt;();</span><br><span class="line">       fragmentList.add(fragment1);</span><br><span class="line">       fragmentList.add(fragment2);</span><br><span class="line">       fragmentList.add(fragment3);</span><br><span class="line">       fragmentList.add(fragment4);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>　　在initData方法里初始化ViewPager的适配器Adapter。并给viewpager设置好adapter。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private void initData() &#123;</span><br><span class="line"></span><br><span class="line">       FragmentPagerAdapter adapter = new FragmentPagerAdapter(getSupportFragmentManager()) &#123;</span><br><span class="line">           @Override</span><br><span class="line">           public Fragment getItem(int position) &#123;</span><br><span class="line">               return fragmentList.get(position);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           @Override</span><br><span class="line">           public int getCount() &#123;</span><br><span class="line">               return fragmentList.size();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line"></span><br><span class="line">       vp_content.setAdapter(adapter);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>　　initEvent方法里主要是监听ViewPager的滑动事件，滑动的时候改变下方TextView的图片和文字颜色。另外同样的监听TextView，然后通过ViewPager的setCurrentItem(）方法，切换到对应的页面。就是这么简单，这样就基本完成了。demo里的fragment的布局和代码都很简单就不贴了。<br>　　<br>　　我也以为就这样就完成了，万万没想到啊，在onCreate方法里调用 <code>vp_content.setCurrentItem(0);</code>设置初始化的时候第一个TextView处于选中状态，然而光写这一句居然不起作用，后来我又改成setCurrentItem(1)、setCurrentItem(2)都是可以正常运行的，进入页面的时候默认选中的是就是位置为1或者2的。但是setCurrentItem(0)，就没有效果。没办法，只能打个断点，debug进去看源码。ViewPager的源码如下：
　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br><span class="line">2109</span><br><span class="line">2110</span><br><span class="line">2111</span><br><span class="line">2112</span><br><span class="line">2113</span><br><span class="line">2114</span><br><span class="line">2115</span><br><span class="line">2116</span><br><span class="line">2117</span><br><span class="line">2118</span><br><span class="line">2119</span><br><span class="line">2120</span><br><span class="line">2121</span><br><span class="line">2122</span><br><span class="line">2123</span><br><span class="line">2124</span><br><span class="line">2125</span><br><span class="line">2126</span><br><span class="line">2127</span><br><span class="line">2128</span><br><span class="line">2129</span><br><span class="line">2130</span><br><span class="line">2131</span><br><span class="line">2132</span><br><span class="line">2133</span><br><span class="line">2134</span><br><span class="line">2135</span><br><span class="line">2136</span><br><span class="line">2137</span><br><span class="line">2138</span><br><span class="line">2139</span><br><span class="line">2140</span><br><span class="line">2141</span><br><span class="line">2142</span><br><span class="line">2143</span><br><span class="line">2144</span><br><span class="line">2145</span><br><span class="line">2146</span><br><span class="line">2147</span><br><span class="line">2148</span><br><span class="line">2149</span><br><span class="line">2150</span><br><span class="line">2151</span><br><span class="line">2152</span><br><span class="line">2153</span><br><span class="line">2154</span><br><span class="line">2155</span><br><span class="line">2156</span><br><span class="line">2157</span><br><span class="line">2158</span><br><span class="line">2159</span><br><span class="line">2160</span><br><span class="line">2161</span><br><span class="line">2162</span><br><span class="line">2163</span><br><span class="line">2164</span><br><span class="line">2165</span><br><span class="line">2166</span><br><span class="line">2167</span><br><span class="line">2168</span><br><span class="line">2169</span><br><span class="line">2170</span><br><span class="line">2171</span><br><span class="line">2172</span><br><span class="line">2173</span><br><span class="line">2174</span><br><span class="line">2175</span><br><span class="line">2176</span><br><span class="line">2177</span><br><span class="line">2178</span><br><span class="line">2179</span><br><span class="line">2180</span><br><span class="line">2181</span><br><span class="line">2182</span><br><span class="line">2183</span><br><span class="line">2184</span><br><span class="line">2185</span><br><span class="line">2186</span><br><span class="line">2187</span><br><span class="line">2188</span><br><span class="line">2189</span><br><span class="line">2190</span><br><span class="line">2191</span><br><span class="line">2192</span><br><span class="line">2193</span><br><span class="line">2194</span><br><span class="line">2195</span><br><span class="line">2196</span><br><span class="line">2197</span><br><span class="line">2198</span><br><span class="line">2199</span><br><span class="line">2200</span><br><span class="line">2201</span><br><span class="line">2202</span><br><span class="line">2203</span><br><span class="line">2204</span><br><span class="line">2205</span><br><span class="line">2206</span><br><span class="line">2207</span><br><span class="line">2208</span><br><span class="line">2209</span><br><span class="line">2210</span><br><span class="line">2211</span><br><span class="line">2212</span><br><span class="line">2213</span><br><span class="line">2214</span><br><span class="line">2215</span><br><span class="line">2216</span><br><span class="line">2217</span><br><span class="line">2218</span><br><span class="line">2219</span><br><span class="line">2220</span><br><span class="line">2221</span><br><span class="line">2222</span><br><span class="line">2223</span><br><span class="line">2224</span><br><span class="line">2225</span><br><span class="line">2226</span><br><span class="line">2227</span><br><span class="line">2228</span><br><span class="line">2229</span><br><span class="line">2230</span><br><span class="line">2231</span><br><span class="line">2232</span><br><span class="line">2233</span><br><span class="line">2234</span><br><span class="line">2235</span><br><span class="line">2236</span><br><span class="line">2237</span><br><span class="line">2238</span><br><span class="line">2239</span><br><span class="line">2240</span><br><span class="line">2241</span><br><span class="line">2242</span><br><span class="line">2243</span><br><span class="line">2244</span><br><span class="line">2245</span><br><span class="line">2246</span><br><span class="line">2247</span><br><span class="line">2248</span><br><span class="line">2249</span><br><span class="line">2250</span><br><span class="line">2251</span><br><span class="line">2252</span><br><span class="line">2253</span><br><span class="line">2254</span><br><span class="line">2255</span><br><span class="line">2256</span><br><span class="line">2257</span><br><span class="line">2258</span><br><span class="line">2259</span><br><span class="line">2260</span><br><span class="line">2261</span><br><span class="line">2262</span><br><span class="line">2263</span><br><span class="line">2264</span><br><span class="line">2265</span><br><span class="line">2266</span><br><span class="line">2267</span><br><span class="line">2268</span><br><span class="line">2269</span><br><span class="line">2270</span><br><span class="line">2271</span><br><span class="line">2272</span><br><span class="line">2273</span><br><span class="line">2274</span><br><span class="line">2275</span><br><span class="line">2276</span><br><span class="line">2277</span><br><span class="line">2278</span><br><span class="line">2279</span><br><span class="line">2280</span><br><span class="line">2281</span><br><span class="line">2282</span><br><span class="line">2283</span><br><span class="line">2284</span><br><span class="line">2285</span><br><span class="line">2286</span><br><span class="line">2287</span><br><span class="line">2288</span><br><span class="line">2289</span><br><span class="line">2290</span><br><span class="line">2291</span><br><span class="line">2292</span><br><span class="line">2293</span><br><span class="line">2294</span><br><span class="line">2295</span><br><span class="line">2296</span><br><span class="line">2297</span><br><span class="line">2298</span><br><span class="line">2299</span><br><span class="line">2300</span><br><span class="line">2301</span><br><span class="line">2302</span><br><span class="line">2303</span><br><span class="line">2304</span><br><span class="line">2305</span><br><span class="line">2306</span><br><span class="line">2307</span><br><span class="line">2308</span><br><span class="line">2309</span><br><span class="line">2310</span><br><span class="line">2311</span><br><span class="line">2312</span><br><span class="line">2313</span><br><span class="line">2314</span><br><span class="line">2315</span><br><span class="line">2316</span><br><span class="line">2317</span><br><span class="line">2318</span><br><span class="line">2319</span><br><span class="line">2320</span><br><span class="line">2321</span><br><span class="line">2322</span><br><span class="line">2323</span><br><span class="line">2324</span><br><span class="line">2325</span><br><span class="line">2326</span><br><span class="line">2327</span><br><span class="line">2328</span><br><span class="line">2329</span><br><span class="line">2330</span><br><span class="line">2331</span><br><span class="line">2332</span><br><span class="line">2333</span><br><span class="line">2334</span><br><span class="line">2335</span><br><span class="line">2336</span><br><span class="line">2337</span><br><span class="line">2338</span><br><span class="line">2339</span><br><span class="line">2340</span><br><span class="line">2341</span><br><span class="line">2342</span><br><span class="line">2343</span><br><span class="line">2344</span><br><span class="line">2345</span><br><span class="line">2346</span><br><span class="line">2347</span><br><span class="line">2348</span><br><span class="line">2349</span><br><span class="line">2350</span><br><span class="line">2351</span><br><span class="line">2352</span><br><span class="line">2353</span><br><span class="line">2354</span><br><span class="line">2355</span><br><span class="line">2356</span><br><span class="line">2357</span><br><span class="line">2358</span><br><span class="line">2359</span><br><span class="line">2360</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2366</span><br><span class="line">2367</span><br><span class="line">2368</span><br><span class="line">2369</span><br><span class="line">2370</span><br><span class="line">2371</span><br><span class="line">2372</span><br><span class="line">2373</span><br><span class="line">2374</span><br><span class="line">2375</span><br><span class="line">2376</span><br><span class="line">2377</span><br><span class="line">2378</span><br><span class="line">2379</span><br><span class="line">2380</span><br><span class="line">2381</span><br><span class="line">2382</span><br><span class="line">2383</span><br><span class="line">2384</span><br><span class="line">2385</span><br><span class="line">2386</span><br><span class="line">2387</span><br><span class="line">2388</span><br><span class="line">2389</span><br><span class="line">2390</span><br><span class="line">2391</span><br><span class="line">2392</span><br><span class="line">2393</span><br><span class="line">2394</span><br><span class="line">2395</span><br><span class="line">2396</span><br><span class="line">2397</span><br><span class="line">2398</span><br><span class="line">2399</span><br><span class="line">2400</span><br><span class="line">2401</span><br><span class="line">2402</span><br><span class="line">2403</span><br><span class="line">2404</span><br><span class="line">2405</span><br><span class="line">2406</span><br><span class="line">2407</span><br><span class="line">2408</span><br><span class="line">2409</span><br><span class="line">2410</span><br><span class="line">2411</span><br><span class="line">2412</span><br><span class="line">2413</span><br><span class="line">2414</span><br><span class="line">2415</span><br><span class="line">2416</span><br><span class="line">2417</span><br><span class="line">2418</span><br><span class="line">2419</span><br><span class="line">2420</span><br><span class="line">2421</span><br><span class="line">2422</span><br><span class="line">2423</span><br><span class="line">2424</span><br><span class="line">2425</span><br><span class="line">2426</span><br><span class="line">2427</span><br><span class="line">2428</span><br><span class="line">2429</span><br><span class="line">2430</span><br><span class="line">2431</span><br><span class="line">2432</span><br><span class="line">2433</span><br><span class="line">2434</span><br><span class="line">2435</span><br><span class="line">2436</span><br><span class="line">2437</span><br><span class="line">2438</span><br><span class="line">2439</span><br><span class="line">2440</span><br><span class="line">2441</span><br><span class="line">2442</span><br><span class="line">2443</span><br><span class="line">2444</span><br><span class="line">2445</span><br><span class="line">2446</span><br><span class="line">2447</span><br><span class="line">2448</span><br><span class="line">2449</span><br><span class="line">2450</span><br><span class="line">2451</span><br><span class="line">2452</span><br><span class="line">2453</span><br><span class="line">2454</span><br><span class="line">2455</span><br><span class="line">2456</span><br><span class="line">2457</span><br><span class="line">2458</span><br><span class="line">2459</span><br><span class="line">2460</span><br><span class="line">2461</span><br><span class="line">2462</span><br><span class="line">2463</span><br><span class="line">2464</span><br><span class="line">2465</span><br><span class="line">2466</span><br><span class="line">2467</span><br><span class="line">2468</span><br><span class="line">2469</span><br><span class="line">2470</span><br><span class="line">2471</span><br><span class="line">2472</span><br><span class="line">2473</span><br><span class="line">2474</span><br><span class="line">2475</span><br><span class="line">2476</span><br><span class="line">2477</span><br><span class="line">2478</span><br><span class="line">2479</span><br><span class="line">2480</span><br><span class="line">2481</span><br><span class="line">2482</span><br><span class="line">2483</span><br><span class="line">2484</span><br><span class="line">2485</span><br><span class="line">2486</span><br><span class="line">2487</span><br><span class="line">2488</span><br><span class="line">2489</span><br><span class="line">2490</span><br><span class="line">2491</span><br><span class="line">2492</span><br><span class="line">2493</span><br><span class="line">2494</span><br><span class="line">2495</span><br><span class="line">2496</span><br><span class="line">2497</span><br><span class="line">2498</span><br><span class="line">2499</span><br><span class="line">2500</span><br><span class="line">2501</span><br><span class="line">2502</span><br><span class="line">2503</span><br><span class="line">2504</span><br><span class="line">2505</span><br><span class="line">2506</span><br><span class="line">2507</span><br><span class="line">2508</span><br><span class="line">2509</span><br><span class="line">2510</span><br><span class="line">2511</span><br><span class="line">2512</span><br><span class="line">2513</span><br><span class="line">2514</span><br><span class="line">2515</span><br><span class="line">2516</span><br><span class="line">2517</span><br><span class="line">2518</span><br><span class="line">2519</span><br><span class="line">2520</span><br><span class="line">2521</span><br><span class="line">2522</span><br><span class="line">2523</span><br><span class="line">2524</span><br><span class="line">2525</span><br><span class="line">2526</span><br><span class="line">2527</span><br><span class="line">2528</span><br><span class="line">2529</span><br><span class="line">2530</span><br><span class="line">2531</span><br><span class="line">2532</span><br><span class="line">2533</span><br><span class="line">2534</span><br><span class="line">2535</span><br><span class="line">2536</span><br><span class="line">2537</span><br><span class="line">2538</span><br><span class="line">2539</span><br><span class="line">2540</span><br><span class="line">2541</span><br><span class="line">2542</span><br><span class="line">2543</span><br><span class="line">2544</span><br><span class="line">2545</span><br><span class="line">2546</span><br><span class="line">2547</span><br><span class="line">2548</span><br><span class="line">2549</span><br><span class="line">2550</span><br><span class="line">2551</span><br><span class="line">2552</span><br><span class="line">2553</span><br><span class="line">2554</span><br><span class="line">2555</span><br><span class="line">2556</span><br><span class="line">2557</span><br><span class="line">2558</span><br><span class="line">2559</span><br><span class="line">2560</span><br><span class="line">2561</span><br><span class="line">2562</span><br><span class="line">2563</span><br><span class="line">2564</span><br><span class="line">2565</span><br><span class="line">2566</span><br><span class="line">2567</span><br><span class="line">2568</span><br><span class="line">2569</span><br><span class="line">2570</span><br><span class="line">2571</span><br><span class="line">2572</span><br><span class="line">2573</span><br><span class="line">2574</span><br><span class="line">2575</span><br><span class="line">2576</span><br><span class="line">2577</span><br><span class="line">2578</span><br><span class="line">2579</span><br><span class="line">2580</span><br><span class="line">2581</span><br><span class="line">2582</span><br><span class="line">2583</span><br><span class="line">2584</span><br><span class="line">2585</span><br><span class="line">2586</span><br><span class="line">2587</span><br><span class="line">2588</span><br><span class="line">2589</span><br><span class="line">2590</span><br><span class="line">2591</span><br><span class="line">2592</span><br><span class="line">2593</span><br><span class="line">2594</span><br><span class="line">2595</span><br><span class="line">2596</span><br><span class="line">2597</span><br><span class="line">2598</span><br><span class="line">2599</span><br><span class="line">2600</span><br><span class="line">2601</span><br><span class="line">2602</span><br><span class="line">2603</span><br><span class="line">2604</span><br><span class="line">2605</span><br><span class="line">2606</span><br><span class="line">2607</span><br><span class="line">2608</span><br><span class="line">2609</span><br><span class="line">2610</span><br><span class="line">2611</span><br><span class="line">2612</span><br><span class="line">2613</span><br><span class="line">2614</span><br><span class="line">2615</span><br><span class="line">2616</span><br><span class="line">2617</span><br><span class="line">2618</span><br><span class="line">2619</span><br><span class="line">2620</span><br><span class="line">2621</span><br><span class="line">2622</span><br><span class="line">2623</span><br><span class="line">2624</span><br><span class="line">2625</span><br><span class="line">2626</span><br><span class="line">2627</span><br><span class="line">2628</span><br><span class="line">2629</span><br><span class="line">2630</span><br><span class="line">2631</span><br><span class="line">2632</span><br><span class="line">2633</span><br><span class="line">2634</span><br><span class="line">2635</span><br><span class="line">2636</span><br><span class="line">2637</span><br><span class="line">2638</span><br><span class="line">2639</span><br><span class="line">2640</span><br><span class="line">2641</span><br><span class="line">2642</span><br><span class="line">2643</span><br><span class="line">2644</span><br><span class="line">2645</span><br><span class="line">2646</span><br><span class="line">2647</span><br><span class="line">2648</span><br><span class="line">2649</span><br><span class="line">2650</span><br><span class="line">2651</span><br><span class="line">2652</span><br><span class="line">2653</span><br><span class="line">2654</span><br><span class="line">2655</span><br><span class="line">2656</span><br><span class="line">2657</span><br><span class="line">2658</span><br><span class="line">2659</span><br><span class="line">2660</span><br><span class="line">2661</span><br><span class="line">2662</span><br><span class="line">2663</span><br><span class="line">2664</span><br><span class="line">2665</span><br><span class="line">2666</span><br><span class="line">2667</span><br><span class="line">2668</span><br><span class="line">2669</span><br><span class="line">2670</span><br><span class="line">2671</span><br><span class="line">2672</span><br><span class="line">2673</span><br><span class="line">2674</span><br><span class="line">2675</span><br><span class="line">2676</span><br><span class="line">2677</span><br><span class="line">2678</span><br><span class="line">2679</span><br><span class="line">2680</span><br><span class="line">2681</span><br><span class="line">2682</span><br><span class="line">2683</span><br><span class="line">2684</span><br><span class="line">2685</span><br><span class="line">2686</span><br><span class="line">2687</span><br><span class="line">2688</span><br><span class="line">2689</span><br><span class="line">2690</span><br><span class="line">2691</span><br><span class="line">2692</span><br><span class="line">2693</span><br><span class="line">2694</span><br><span class="line">2695</span><br><span class="line">2696</span><br><span class="line">2697</span><br><span class="line">2698</span><br><span class="line">2699</span><br><span class="line">2700</span><br><span class="line">2701</span><br><span class="line">2702</span><br><span class="line">2703</span><br><span class="line">2704</span><br><span class="line">2705</span><br><span class="line">2706</span><br><span class="line">2707</span><br><span class="line">2708</span><br><span class="line">2709</span><br><span class="line">2710</span><br><span class="line">2711</span><br><span class="line">2712</span><br><span class="line">2713</span><br><span class="line">2714</span><br><span class="line">2715</span><br><span class="line">2716</span><br><span class="line">2717</span><br><span class="line">2718</span><br><span class="line">2719</span><br><span class="line">2720</span><br><span class="line">2721</span><br><span class="line">2722</span><br><span class="line">2723</span><br><span class="line">2724</span><br><span class="line">2725</span><br><span class="line">2726</span><br><span class="line">2727</span><br><span class="line">2728</span><br><span class="line">2729</span><br><span class="line">2730</span><br><span class="line">2731</span><br><span class="line">2732</span><br><span class="line">2733</span><br><span class="line">2734</span><br><span class="line">2735</span><br><span class="line">2736</span><br><span class="line">2737</span><br><span class="line">2738</span><br><span class="line">2739</span><br><span class="line">2740</span><br><span class="line">2741</span><br><span class="line">2742</span><br><span class="line">2743</span><br><span class="line">2744</span><br><span class="line">2745</span><br><span class="line">2746</span><br><span class="line">2747</span><br><span class="line">2748</span><br><span class="line">2749</span><br><span class="line">2750</span><br><span class="line">2751</span><br><span class="line">2752</span><br><span class="line">2753</span><br><span class="line">2754</span><br><span class="line">2755</span><br><span class="line">2756</span><br><span class="line">2757</span><br><span class="line">2758</span><br><span class="line">2759</span><br><span class="line">2760</span><br><span class="line">2761</span><br><span class="line">2762</span><br><span class="line">2763</span><br><span class="line">2764</span><br><span class="line">2765</span><br><span class="line">2766</span><br><span class="line">2767</span><br><span class="line">2768</span><br><span class="line">2769</span><br><span class="line">2770</span><br><span class="line">2771</span><br><span class="line">2772</span><br><span class="line">2773</span><br><span class="line">2774</span><br><span class="line">2775</span><br><span class="line">2776</span><br><span class="line">2777</span><br><span class="line">2778</span><br><span class="line">2779</span><br><span class="line">2780</span><br><span class="line">2781</span><br><span class="line">2782</span><br><span class="line">2783</span><br><span class="line">2784</span><br><span class="line">2785</span><br><span class="line">2786</span><br><span class="line">2787</span><br><span class="line">2788</span><br><span class="line">2789</span><br><span class="line">2790</span><br><span class="line">2791</span><br><span class="line">2792</span><br><span class="line">2793</span><br><span class="line">2794</span><br><span class="line">2795</span><br><span class="line">2796</span><br><span class="line">2797</span><br><span class="line">2798</span><br><span class="line">2799</span><br><span class="line">2800</span><br><span class="line">2801</span><br><span class="line">2802</span><br><span class="line">2803</span><br><span class="line">2804</span><br><span class="line">2805</span><br><span class="line">2806</span><br><span class="line">2807</span><br><span class="line">2808</span><br><span class="line">2809</span><br><span class="line">2810</span><br><span class="line">2811</span><br><span class="line">2812</span><br><span class="line">2813</span><br><span class="line">2814</span><br><span class="line">2815</span><br><span class="line">2816</span><br><span class="line">2817</span><br><span class="line">2818</span><br><span class="line">2819</span><br><span class="line">2820</span><br><span class="line">2821</span><br><span class="line">2822</span><br><span class="line">2823</span><br><span class="line">2824</span><br><span class="line">2825</span><br><span class="line">2826</span><br><span class="line">2827</span><br><span class="line">2828</span><br><span class="line">2829</span><br><span class="line">2830</span><br><span class="line">2831</span><br><span class="line">2832</span><br><span class="line">2833</span><br><span class="line">2834</span><br><span class="line">2835</span><br><span class="line">2836</span><br><span class="line">2837</span><br><span class="line">2838</span><br><span class="line">2839</span><br><span class="line">2840</span><br><span class="line">2841</span><br><span class="line">2842</span><br><span class="line">2843</span><br><span class="line">2844</span><br><span class="line">2845</span><br><span class="line">2846</span><br><span class="line">2847</span><br><span class="line">2848</span><br><span class="line">2849</span><br><span class="line">2850</span><br><span class="line">2851</span><br><span class="line">2852</span><br><span class="line">2853</span><br><span class="line">2854</span><br><span class="line">2855</span><br><span class="line">2856</span><br><span class="line">2857</span><br><span class="line">2858</span><br><span class="line">2859</span><br><span class="line">2860</span><br><span class="line">2861</span><br><span class="line">2862</span><br><span class="line">2863</span><br><span class="line">2864</span><br><span class="line">2865</span><br><span class="line">2866</span><br><span class="line">2867</span><br><span class="line">2868</span><br><span class="line">2869</span><br><span class="line">2870</span><br><span class="line">2871</span><br><span class="line">2872</span><br><span class="line">2873</span><br><span class="line">2874</span><br><span class="line">2875</span><br><span class="line">2876</span><br><span class="line">2877</span><br><span class="line">2878</span><br><span class="line">2879</span><br><span class="line">2880</span><br><span class="line">2881</span><br><span class="line">2882</span><br><span class="line">2883</span><br><span class="line">2884</span><br><span class="line">2885</span><br><span class="line">2886</span><br><span class="line">2887</span><br><span class="line">2888</span><br><span class="line">2889</span><br><span class="line">2890</span><br><span class="line">2891</span><br><span class="line">2892</span><br><span class="line">2893</span><br><span class="line">2894</span><br><span class="line">2895</span><br><span class="line">2896</span><br><span class="line">2897</span><br><span class="line">2898</span><br><span class="line">2899</span><br><span class="line">2900</span><br><span class="line">2901</span><br><span class="line">2902</span><br><span class="line">2903</span><br><span class="line">2904</span><br><span class="line">2905</span><br><span class="line">2906</span><br><span class="line">2907</span><br><span class="line">2908</span><br><span class="line">2909</span><br><span class="line">2910</span><br><span class="line">2911</span><br><span class="line">2912</span><br><span class="line">2913</span><br><span class="line">2914</span><br><span class="line">2915</span><br><span class="line">2916</span><br><span class="line">2917</span><br><span class="line">2918</span><br><span class="line">2919</span><br><span class="line">2920</span><br><span class="line">2921</span><br><span class="line">2922</span><br><span class="line">2923</span><br><span class="line">2924</span><br><span class="line">2925</span><br><span class="line">2926</span><br><span class="line">2927</span><br><span class="line">2928</span><br><span class="line">2929</span><br><span class="line">2930</span><br><span class="line">2931</span><br><span class="line">2932</span><br><span class="line">2933</span><br><span class="line">2934</span><br><span class="line">2935</span><br><span class="line">2936</span><br><span class="line">2937</span><br><span class="line">2938</span><br><span class="line">2939</span><br><span class="line">2940</span><br><span class="line">2941</span><br><span class="line">2942</span><br><span class="line">2943</span><br><span class="line">2944</span><br><span class="line">2945</span><br><span class="line">2946</span><br><span class="line">2947</span><br><span class="line">2948</span><br><span class="line">2949</span><br><span class="line">2950</span><br><span class="line">2951</span><br><span class="line">2952</span><br><span class="line">2953</span><br><span class="line">2954</span><br><span class="line">2955</span><br><span class="line">2956</span><br><span class="line">2957</span><br><span class="line">2958</span><br><span class="line">2959</span><br><span class="line">2960</span><br><span class="line">2961</span><br><span class="line">2962</span><br><span class="line">2963</span><br><span class="line">2964</span><br><span class="line">2965</span><br><span class="line">2966</span><br><span class="line">2967</span><br><span class="line">2968</span><br><span class="line">2969</span><br><span class="line">2970</span><br><span class="line">2971</span><br><span class="line">2972</span><br><span class="line">2973</span><br><span class="line">2974</span><br><span class="line">2975</span><br><span class="line">2976</span><br><span class="line">2977</span><br><span class="line">2978</span><br><span class="line">2979</span><br><span class="line">2980</span><br><span class="line">2981</span><br><span class="line">2982</span><br><span class="line">2983</span><br><span class="line">2984</span><br><span class="line">2985</span><br><span class="line">2986</span><br><span class="line">2987</span><br><span class="line">2988</span><br><span class="line">2989</span><br><span class="line">2990</span><br><span class="line">2991</span><br><span class="line">2992</span><br><span class="line">2993</span><br><span class="line">2994</span><br><span class="line">2995</span><br><span class="line">2996</span><br><span class="line">2997</span><br><span class="line">2998</span><br><span class="line">2999</span><br><span class="line">3000</span><br><span class="line">3001</span><br><span class="line">3002</span><br><span class="line">3003</span><br><span class="line">3004</span><br><span class="line">3005</span><br><span class="line">3006</span><br><span class="line">3007</span><br><span class="line">3008</span><br><span class="line">3009</span><br><span class="line">3010</span><br><span class="line">3011</span><br><span class="line">3012</span><br><span class="line">3013</span><br><span class="line">3014</span><br><span class="line">3015</span><br><span class="line">3016</span><br><span class="line">3017</span><br><span class="line">3018</span><br><span class="line">3019</span><br><span class="line">3020</span><br><span class="line">3021</span><br><span class="line">3022</span><br><span class="line">3023</span><br><span class="line">3024</span><br><span class="line">3025</span><br><span class="line">3026</span><br><span class="line">3027</span><br><span class="line">3028</span><br><span class="line">3029</span><br><span class="line">3030</span><br><span class="line">3031</span><br><span class="line">3032</span><br><span class="line">3033</span><br><span class="line">3034</span><br><span class="line">3035</span><br><span class="line">3036</span><br><span class="line">3037</span><br><span class="line">3038</span><br><span class="line">3039</span><br><span class="line">3040</span><br><span class="line">3041</span><br><span class="line">3042</span><br><span class="line">3043</span><br><span class="line">3044</span><br><span class="line">3045</span><br><span class="line">3046</span><br><span class="line">3047</span><br><span class="line">3048</span><br><span class="line">3049</span><br><span class="line">3050</span><br><span class="line">3051</span><br><span class="line">3052</span><br><span class="line">3053</span><br><span class="line">3054</span><br><span class="line">3055</span><br><span class="line">3056</span><br><span class="line">3057</span><br><span class="line">3058</span><br><span class="line">3059</span><br><span class="line">3060</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Copyright (C) 2011 The Android Open Source Project</span><br><span class="line"> *</span><br><span class="line"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="line"> * you may not use this file except in compliance with the License.</span><br><span class="line"> * You may obtain a copy of the License at</span><br><span class="line"> *</span><br><span class="line"> *      http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"> *</span><br><span class="line"> * Unless required by applicable law or agreed to in writing, software</span><br><span class="line"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="line"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="line"> * See the License for the specific language governing permissions and</span><br><span class="line"> * limitations under the License.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">package android.support.v4.view;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.content.res.Resources;</span><br><span class="line">import android.content.res.TypedArray;</span><br><span class="line">import android.database.DataSetObserver;</span><br><span class="line">import android.graphics.Canvas;</span><br><span class="line">import android.graphics.Rect;</span><br><span class="line">import android.graphics.drawable.Drawable;</span><br><span class="line">import android.os.Build;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.os.Parcel;</span><br><span class="line">import android.os.Parcelable;</span><br><span class="line">import android.os.SystemClock;</span><br><span class="line">import android.support.annotation.CallSuper;</span><br><span class="line">import android.support.annotation.DrawableRes;</span><br><span class="line">import android.support.v4.os.ParcelableCompat;</span><br><span class="line">import android.support.v4.os.ParcelableCompatCreatorCallbacks;</span><br><span class="line">import android.support.v4.view.accessibility.AccessibilityEventCompat;</span><br><span class="line">import android.support.v4.view.accessibility.AccessibilityNodeInfoCompat;</span><br><span class="line">import android.support.v4.view.accessibility.AccessibilityRecordCompat;</span><br><span class="line">import android.support.v4.widget.EdgeEffectCompat;</span><br><span class="line">import android.util.AttributeSet;</span><br><span class="line">import android.util.Log;</span><br><span class="line">import android.view.FocusFinder;</span><br><span class="line">import android.view.Gravity;</span><br><span class="line">import android.view.KeyEvent;</span><br><span class="line">import android.view.MotionEvent;</span><br><span class="line">import android.view.SoundEffectConstants;</span><br><span class="line">import android.view.VelocityTracker;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.ViewConfiguration;</span><br><span class="line">import android.view.ViewGroup;</span><br><span class="line">import android.view.ViewParent;</span><br><span class="line">import android.view.accessibility.AccessibilityEvent;</span><br><span class="line">import android.view.animation.Interpolator;</span><br><span class="line">import android.widget.Scroller;</span><br><span class="line"></span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Layout manager that allows the user to flip left and right</span><br><span class="line"> * through pages of data.  You supply an implementation of a</span><br><span class="line"> * &#123;@link PagerAdapter&#125; to generate the pages that the view shows.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Note this class is currently under early design and</span><br><span class="line"> * development.  The API will likely change in later updates of</span><br><span class="line"> * the compatibility library, requiring changes to the source code</span><br><span class="line"> * of apps when they are compiled against the newer version.&lt;/p&gt;</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;ViewPager is most often used in conjunction with &#123;@link android.app.Fragment&#125;,</span><br><span class="line"> * which is a convenient way to supply and manage the lifecycle of each page.</span><br><span class="line"> * There are standard adapters implemented for using fragments with the ViewPager,</span><br><span class="line"> * which cover the most common use cases.  These are</span><br><span class="line"> * &#123;@link android.support.v4.app.FragmentPagerAdapter&#125; and </span><br><span class="line"> * &#123;@link android.support.v4.app.FragmentStatePagerAdapter&#125;; each of these</span><br><span class="line"> * classes have simple code showing how to build a full user interface</span><br><span class="line"> * with them.</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;For more information about how to use ViewPager, read &lt;a</span><br><span class="line"> * href=&quot;&#123;@docRoot&#125;training/implementing-navigation/lateral.html&quot;&gt;Creating Swipe Views with</span><br><span class="line"> * Tabs&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"> *</span><br><span class="line"> * &lt;p&gt;Below is a more complicated example of ViewPager, using it in conjunction</span><br><span class="line"> * with &#123;@link android.app.ActionBar&#125; tabs.  You can find other examples of using</span><br><span class="line"> * ViewPager in the API 4+ Support Demos and API 13+ Support Demos sample code.</span><br><span class="line"> *</span><br><span class="line"> * &#123;@sample development/samples/Support13Demos/src/com/example/android/supportv13/app/ActionBarTabsPager.java</span><br><span class="line"> *      complete&#125;</span><br><span class="line"> */</span><br><span class="line">public class ViewPager extends ViewGroup &#123;</span><br><span class="line">    private static final String TAG = &quot;ViewPager&quot;;</span><br><span class="line">    private static final boolean DEBUG = false;</span><br><span class="line"></span><br><span class="line">    private static final boolean USE_CACHE = false;</span><br><span class="line"></span><br><span class="line">    private static final int DEFAULT_OFFSCREEN_PAGES = 1;</span><br><span class="line">    private static final int MAX_SETTLE_DURATION = 600; // ms</span><br><span class="line">    private static final int MIN_DISTANCE_FOR_FLING = 25; // dips</span><br><span class="line"></span><br><span class="line">    private static final int DEFAULT_GUTTER_SIZE = 16; // dips</span><br><span class="line"></span><br><span class="line">    private static final int MIN_FLING_VELOCITY = 400; // dips</span><br><span class="line"></span><br><span class="line">    private static final int[] LAYOUT_ATTRS = new int[] &#123;</span><br><span class="line">        android.R.attr.layout_gravity</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Used to track what the expected number of items in the adapter should be.</span><br><span class="line">     * If the app changes this when we don&apos;t expect it, we&apos;ll throw a big obnoxious exception.</span><br><span class="line">     */</span><br><span class="line">    private int mExpectedAdapterCount;</span><br><span class="line"></span><br><span class="line">    static class ItemInfo &#123;</span><br><span class="line">        Object object;</span><br><span class="line">        int position;</span><br><span class="line">        boolean scrolling;</span><br><span class="line">        float widthFactor;</span><br><span class="line">        float offset;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static final Comparator&lt;ItemInfo&gt; COMPARATOR = new Comparator&lt;ItemInfo&gt;()&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(ItemInfo lhs, ItemInfo rhs) &#123;</span><br><span class="line">            return lhs.position - rhs.position;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    private static final Interpolator sInterpolator = new Interpolator() &#123;</span><br><span class="line">        public float getInterpolation(float t) &#123;</span><br><span class="line">            t -= 1.0f;</span><br><span class="line">            return t * t * t * t * t + 1.0f;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    private final ArrayList&lt;ItemInfo&gt; mItems = new ArrayList&lt;ItemInfo&gt;();</span><br><span class="line">    private final ItemInfo mTempItem = new ItemInfo();</span><br><span class="line"></span><br><span class="line">    private final Rect mTempRect = new Rect();</span><br><span class="line"></span><br><span class="line">    private PagerAdapter mAdapter;</span><br><span class="line">    private int mCurItem;   // Index of currently displayed page.</span><br><span class="line">    private int mRestoredCurItem = -1;</span><br><span class="line">    private Parcelable mRestoredAdapterState = null;</span><br><span class="line">    private ClassLoader mRestoredClassLoader = null;</span><br><span class="line"></span><br><span class="line">    private Scroller mScroller;</span><br><span class="line">    private boolean mIsScrollStarted;</span><br><span class="line"></span><br><span class="line">    private PagerObserver mObserver;</span><br><span class="line"></span><br><span class="line">    private int mPageMargin;</span><br><span class="line">    private Drawable mMarginDrawable;</span><br><span class="line">    private int mTopPageBounds;</span><br><span class="line">    private int mBottomPageBounds;</span><br><span class="line"></span><br><span class="line">    // Offsets of the first and last items, if known.</span><br><span class="line">    // Set during population, used to determine if we are at the beginning</span><br><span class="line">    // or end of the pager data set during touch scrolling.</span><br><span class="line">    private float mFirstOffset = -Float.MAX_VALUE;</span><br><span class="line">    private float mLastOffset = Float.MAX_VALUE;</span><br><span class="line"></span><br><span class="line">    private int mChildWidthMeasureSpec;</span><br><span class="line">    private int mChildHeightMeasureSpec;</span><br><span class="line">    private boolean mInLayout;</span><br><span class="line"></span><br><span class="line">    private boolean mScrollingCacheEnabled;</span><br><span class="line"></span><br><span class="line">    private boolean mPopulatePending;</span><br><span class="line">    private int mOffscreenPageLimit = DEFAULT_OFFSCREEN_PAGES;</span><br><span class="line"></span><br><span class="line">    private boolean mIsBeingDragged;</span><br><span class="line">    private boolean mIsUnableToDrag;</span><br><span class="line">    private int mDefaultGutterSize;</span><br><span class="line">    private int mGutterSize;</span><br><span class="line">    private int mTouchSlop;</span><br><span class="line">    /**</span><br><span class="line">     * Position of the last motion event.</span><br><span class="line">     */</span><br><span class="line">    private float mLastMotionX;</span><br><span class="line">    private float mLastMotionY;</span><br><span class="line">    private float mInitialMotionX;</span><br><span class="line">    private float mInitialMotionY;</span><br><span class="line">    /**</span><br><span class="line">     * ID of the active pointer. This is used to retain consistency during</span><br><span class="line">     * drags/flings if multiple pointers are used.</span><br><span class="line">     */</span><br><span class="line">    private int mActivePointerId = INVALID_POINTER;</span><br><span class="line">    /**</span><br><span class="line">     * Sentinel value for no current active pointer.</span><br><span class="line">     * Used by &#123;@link #mActivePointerId&#125;.</span><br><span class="line">     */</span><br><span class="line">    private static final int INVALID_POINTER = -1;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Determines speed during touch scrolling</span><br><span class="line">     */</span><br><span class="line">    private VelocityTracker mVelocityTracker;</span><br><span class="line">    private int mMinimumVelocity;</span><br><span class="line">    private int mMaximumVelocity;</span><br><span class="line">    private int mFlingDistance;</span><br><span class="line">    private int mCloseEnough;</span><br><span class="line"></span><br><span class="line">    // If the pager is at least this close to its final position, complete the scroll</span><br><span class="line">    // on touch down and let the user interact with the content inside instead of</span><br><span class="line">    // &quot;catching&quot; the flinging pager.</span><br><span class="line">    private static final int CLOSE_ENOUGH = 2; // dp</span><br><span class="line"></span><br><span class="line">    private boolean mFakeDragging;</span><br><span class="line">    private long mFakeDragBeginTime;</span><br><span class="line"></span><br><span class="line">    private EdgeEffectCompat mLeftEdge;</span><br><span class="line">    private EdgeEffectCompat mRightEdge;</span><br><span class="line"></span><br><span class="line">    private boolean mFirstLayout = true;</span><br><span class="line">    private boolean mNeedCalculatePageOffsets = false;</span><br><span class="line">    private boolean mCalledSuper;</span><br><span class="line">    private int mDecorChildCount;</span><br><span class="line"></span><br><span class="line">    private List&lt;OnPageChangeListener&gt; mOnPageChangeListeners;</span><br><span class="line">    private OnPageChangeListener mOnPageChangeListener;</span><br><span class="line">    private OnPageChangeListener mInternalPageChangeListener;</span><br><span class="line">    private OnAdapterChangeListener mAdapterChangeListener;</span><br><span class="line">    private PageTransformer mPageTransformer;</span><br><span class="line">    private Method mSetChildrenDrawingOrderEnabled;</span><br><span class="line"></span><br><span class="line">    private static final int DRAW_ORDER_DEFAULT = 0;</span><br><span class="line">    private static final int DRAW_ORDER_FORWARD = 1;</span><br><span class="line">    private static final int DRAW_ORDER_REVERSE = 2;</span><br><span class="line">    private int mDrawingOrder;</span><br><span class="line">    private ArrayList&lt;View&gt; mDrawingOrderedChildren;</span><br><span class="line">    private static final ViewPositionComparator sPositionComparator = new ViewPositionComparator();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Indicates that the pager is in an idle, settled state. The current page</span><br><span class="line">     * is fully in view and no animation is in progress.</span><br><span class="line">     */</span><br><span class="line">    public static final int SCROLL_STATE_IDLE = 0;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Indicates that the pager is currently being dragged by the user.</span><br><span class="line">     */</span><br><span class="line">    public static final int SCROLL_STATE_DRAGGING = 1;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Indicates that the pager is in the process of settling to a final position.</span><br><span class="line">     */</span><br><span class="line">    public static final int SCROLL_STATE_SETTLING = 2;</span><br><span class="line"></span><br><span class="line">    private final Runnable mEndScrollRunnable = new Runnable() &#123;</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            setScrollState(SCROLL_STATE_IDLE);</span><br><span class="line">            populate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    private int mScrollState = SCROLL_STATE_IDLE;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Callback interface for responding to changing state of the selected page.</span><br><span class="line">     */</span><br><span class="line">    public interface OnPageChangeListener &#123;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * This method will be invoked when the current page is scrolled, either as part</span><br><span class="line">         * of a programmatically initiated smooth scroll or a user initiated touch scroll.</span><br><span class="line">         *</span><br><span class="line">         * @param position Position index of the first page currently being displayed.</span><br><span class="line">         *                 Page position+1 will be visible if positionOffset is nonzero.</span><br><span class="line">         * @param positionOffset Value from [0, 1) indicating the offset from the page at position.</span><br><span class="line">         * @param positionOffsetPixels Value in pixels indicating the offset from position.</span><br><span class="line">         */</span><br><span class="line">        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels);</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * This method will be invoked when a new page becomes selected. Animation is not</span><br><span class="line">         * necessarily complete.</span><br><span class="line">         *</span><br><span class="line">         * @param position Position index of the new selected page.</span><br><span class="line">         */</span><br><span class="line">        public void onPageSelected(int position);</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Called when the scroll state changes. Useful for discovering when the user</span><br><span class="line">         * begins dragging, when the pager is automatically settling to the current page,</span><br><span class="line">         * or when it is fully stopped/idle.</span><br><span class="line">         *</span><br><span class="line">         * @param state The new scroll state.</span><br><span class="line">         * @see ViewPager#SCROLL_STATE_IDLE</span><br><span class="line">         * @see ViewPager#SCROLL_STATE_DRAGGING</span><br><span class="line">         * @see ViewPager#SCROLL_STATE_SETTLING</span><br><span class="line">         */</span><br><span class="line">        public void onPageScrollStateChanged(int state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Simple implementation of the &#123;@link OnPageChangeListener&#125; interface with stub</span><br><span class="line">     * implementations of each method. Extend this if you do not intend to override</span><br><span class="line">     * every method of &#123;@link OnPageChangeListener&#125;.</span><br><span class="line">     */</span><br><span class="line">    public static class SimpleOnPageChangeListener implements OnPageChangeListener &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) &#123;</span><br><span class="line">            // This space for rent</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onPageSelected(int position) &#123;</span><br><span class="line">            // This space for rent</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onPageScrollStateChanged(int state) &#123;</span><br><span class="line">            // This space for rent</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * A PageTransformer is invoked whenever a visible/attached page is scrolled.</span><br><span class="line">     * This offers an opportunity for the application to apply a custom transformation</span><br><span class="line">     * to the page views using animation properties.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;As property animation is only supported as of Android 3.0 and forward,</span><br><span class="line">     * setting a PageTransformer on a ViewPager on earlier platform versions will</span><br><span class="line">     * be ignored.&lt;/p&gt;</span><br><span class="line">     */</span><br><span class="line">    public interface PageTransformer &#123;</span><br><span class="line">        /**</span><br><span class="line">         * Apply a property transformation to the given page.</span><br><span class="line">         *</span><br><span class="line">         * @param page Apply the transformation to this page</span><br><span class="line">         * @param position Position of page relative to the current front-and-center</span><br><span class="line">         *                 position of the pager. 0 is front and center. 1 is one full</span><br><span class="line">         *                 page position to the right, and -1 is one page position to the left.</span><br><span class="line">         */</span><br><span class="line">        public void transformPage(View page, float position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Used internally to monitor when adapters are switched.</span><br><span class="line">     */</span><br><span class="line">    interface OnAdapterChangeListener &#123;</span><br><span class="line">        public void onAdapterChanged(PagerAdapter oldAdapter, PagerAdapter newAdapter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Used internally to tag special types of child views that should be added as</span><br><span class="line">     * pager decorations by default.</span><br><span class="line">     */</span><br><span class="line">    interface Decor &#123;&#125;</span><br><span class="line"></span><br><span class="line">    public ViewPager(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">        initViewPager();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ViewPager(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">        initViewPager();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void initViewPager() &#123;</span><br><span class="line">        setWillNotDraw(false);</span><br><span class="line">        setDescendantFocusability(FOCUS_AFTER_DESCENDANTS);</span><br><span class="line">        setFocusable(true);</span><br><span class="line">        final Context context = getContext();</span><br><span class="line">        mScroller = new Scroller(context, sInterpolator);</span><br><span class="line">        final ViewConfiguration configuration = ViewConfiguration.get(context);</span><br><span class="line">        final float density = context.getResources().getDisplayMetrics().density;</span><br><span class="line"></span><br><span class="line">        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);</span><br><span class="line">        mMinimumVelocity = (int) (MIN_FLING_VELOCITY * density);</span><br><span class="line">        mMaximumVelocity = configuration.getScaledMaximumFlingVelocity();</span><br><span class="line">        mLeftEdge = new EdgeEffectCompat(context);</span><br><span class="line">        mRightEdge = new EdgeEffectCompat(context);</span><br><span class="line"></span><br><span class="line">        mFlingDistance = (int) (MIN_DISTANCE_FOR_FLING * density);</span><br><span class="line">        mCloseEnough = (int) (CLOSE_ENOUGH * density);</span><br><span class="line">        mDefaultGutterSize = (int) (DEFAULT_GUTTER_SIZE * density);</span><br><span class="line"></span><br><span class="line">        ViewCompat.setAccessibilityDelegate(this, new MyAccessibilityDelegate());</span><br><span class="line"></span><br><span class="line">        if (ViewCompat.getImportantForAccessibility(this)</span><br><span class="line">                == ViewCompat.IMPORTANT_FOR_ACCESSIBILITY_AUTO) &#123;</span><br><span class="line">            ViewCompat.setImportantForAccessibility(this,</span><br><span class="line">                    ViewCompat.IMPORTANT_FOR_ACCESSIBILITY_YES);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ViewCompat.setOnApplyWindowInsetsListener(this,</span><br><span class="line">                new android.support.v4.view.OnApplyWindowInsetsListener() &#123;</span><br><span class="line">                    private final Rect mTempRect = new Rect();</span><br><span class="line"></span><br><span class="line">                    @Override</span><br><span class="line">                    public WindowInsetsCompat onApplyWindowInsets(final View v,</span><br><span class="line">                            final WindowInsetsCompat originalInsets) &#123;</span><br><span class="line">                        // First let the ViewPager itself try and consume them...</span><br><span class="line">                        final WindowInsetsCompat applied =</span><br><span class="line">                                ViewCompat.onApplyWindowInsets(v, originalInsets);</span><br><span class="line">                        if (applied.isConsumed()) &#123;</span><br><span class="line">                            // If the ViewPager consumed all insets, return now</span><br><span class="line">                            return applied;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        // Now we&apos;ll manually dispatch the insets to our children. Since ViewPager</span><br><span class="line">                        // children are always full-height, we do not want to use the standard</span><br><span class="line">                        // ViewGroup dispatchApplyWindowInsets since if child 0 consumes them,</span><br><span class="line">                        // the rest of the children will not receive any insets. To workaround this</span><br><span class="line">                        // we manually dispatch the applied insets, not allowing children to</span><br><span class="line">                        // consume them from each other. We do however keep track of any insets</span><br><span class="line">                        // which are consumed, returning the union of our children&apos;s consumption</span><br><span class="line">                        final Rect res = mTempRect;</span><br><span class="line">                        res.left = applied.getSystemWindowInsetLeft();</span><br><span class="line">                        res.top = applied.getSystemWindowInsetTop();</span><br><span class="line">                        res.right = applied.getSystemWindowInsetRight();</span><br><span class="line">                        res.bottom = applied.getSystemWindowInsetBottom();</span><br><span class="line"></span><br><span class="line">                        for (int i = 0, count = getChildCount(); i &lt; count; i++) &#123;</span><br><span class="line">                            final WindowInsetsCompat childInsets = ViewCompat</span><br><span class="line">                                    .dispatchApplyWindowInsets(getChildAt(i), applied);</span><br><span class="line">                            // Now keep track of any consumed by tracking each dimension&apos;s min</span><br><span class="line">                            // value</span><br><span class="line">                            res.left = Math.min(childInsets.getSystemWindowInsetLeft(),</span><br><span class="line">                                    res.left);</span><br><span class="line">                            res.top = Math.min(childInsets.getSystemWindowInsetTop(),</span><br><span class="line">                                    res.top);</span><br><span class="line">                            res.right = Math.min(childInsets.getSystemWindowInsetRight(),</span><br><span class="line">                                    res.right);</span><br><span class="line">                            res.bottom = Math.min(childInsets.getSystemWindowInsetBottom(),</span><br><span class="line">                                    res.bottom);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        // Now return a new WindowInsets, using the consumed window insets</span><br><span class="line">                        return applied.replaceSystemWindowInsets(</span><br><span class="line">                                res.left, res.top, res.right, res.bottom);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDetachedFromWindow() &#123;</span><br><span class="line">        removeCallbacks(mEndScrollRunnable);</span><br><span class="line">        // To be on the safe side, abort the scroller</span><br><span class="line">        if ((mScroller != null) &amp;&amp; !mScroller.isFinished()) &#123;</span><br><span class="line">            mScroller.abortAnimation();</span><br><span class="line">        &#125;</span><br><span class="line">        super.onDetachedFromWindow();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void setScrollState(int newState) &#123;</span><br><span class="line">        if (mScrollState == newState) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mScrollState = newState;</span><br><span class="line">        if (mPageTransformer != null) &#123;</span><br><span class="line">            // PageTransformers can do complex things that benefit from hardware layers.</span><br><span class="line">            enableLayers(newState != SCROLL_STATE_IDLE);</span><br><span class="line">        &#125;</span><br><span class="line">        dispatchOnScrollStateChanged(newState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set a PagerAdapter that will supply views for this pager as needed.</span><br><span class="line">     *</span><br><span class="line">     * @param adapter Adapter to use</span><br><span class="line">     */</span><br><span class="line">    public void setAdapter(PagerAdapter adapter) &#123;</span><br><span class="line">        if (mAdapter != null) &#123;</span><br><span class="line">            mAdapter.setViewPagerObserver(null);</span><br><span class="line">            mAdapter.startUpdate(this);</span><br><span class="line">            for (int i = 0; i &lt; mItems.size(); i++) &#123;</span><br><span class="line">                final ItemInfo ii = mItems.get(i);</span><br><span class="line">                mAdapter.destroyItem(this, ii.position, ii.object);</span><br><span class="line">            &#125;</span><br><span class="line">            mAdapter.finishUpdate(this);</span><br><span class="line">            mItems.clear();</span><br><span class="line">            removeNonDecorViews();</span><br><span class="line">            mCurItem = 0;</span><br><span class="line">            scrollTo(0, 0);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        final PagerAdapter oldAdapter = mAdapter;</span><br><span class="line">        mAdapter = adapter;</span><br><span class="line">        mExpectedAdapterCount = 0;</span><br><span class="line"></span><br><span class="line">        if (mAdapter != null) &#123;</span><br><span class="line">            if (mObserver == null) &#123;</span><br><span class="line">                mObserver = new PagerObserver();</span><br><span class="line">            &#125;</span><br><span class="line">            mAdapter.setViewPagerObserver(mObserver);</span><br><span class="line">            mPopulatePending = false;</span><br><span class="line">            final boolean wasFirstLayout = mFirstLayout;</span><br><span class="line">            mFirstLayout = true;</span><br><span class="line">            mExpectedAdapterCount = mAdapter.getCount();</span><br><span class="line">            if (mRestoredCurItem &gt;= 0) &#123;</span><br><span class="line">                mAdapter.restoreState(mRestoredAdapterState, mRestoredClassLoader);</span><br><span class="line">                setCurrentItemInternal(mRestoredCurItem, false, true);</span><br><span class="line">                mRestoredCurItem = -1;</span><br><span class="line">                mRestoredAdapterState = null;</span><br><span class="line">                mRestoredClassLoader = null;</span><br><span class="line">            &#125; else if (!wasFirstLayout) &#123;</span><br><span class="line">                populate();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                requestLayout();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mAdapterChangeListener != null &amp;&amp; oldAdapter != adapter) &#123;</span><br><span class="line">            mAdapterChangeListener.onAdapterChanged(oldAdapter, adapter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void removeNonDecorViews() &#123;</span><br><span class="line">        for (int i = 0; i &lt; getChildCount(); i++) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">            if (!lp.isDecor) &#123;</span><br><span class="line">                removeViewAt(i);</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Retrieve the current adapter supplying pages.</span><br><span class="line">     *</span><br><span class="line">     * @return The currently registered PagerAdapter</span><br><span class="line">     */</span><br><span class="line">    public PagerAdapter getAdapter() &#123;</span><br><span class="line">        return mAdapter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void setOnAdapterChangeListener(OnAdapterChangeListener listener) &#123;</span><br><span class="line">        mAdapterChangeListener = listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int getClientWidth() &#123;</span><br><span class="line">        return getMeasuredWidth() - getPaddingLeft() - getPaddingRight();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set the currently selected page. If the ViewPager has already been through its first</span><br><span class="line">     * layout with its current adapter there will be a smooth animated transition between</span><br><span class="line">     * the current item and the specified item.</span><br><span class="line">     *</span><br><span class="line">     * @param item Item index to select</span><br><span class="line">     */</span><br><span class="line">    public void setCurrentItem(int item) &#123;</span><br><span class="line">        mPopulatePending = false;</span><br><span class="line">        setCurrentItemInternal(item, !mFirstLayout, false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set the currently selected page.</span><br><span class="line">     *</span><br><span class="line">     * @param item Item index to select</span><br><span class="line">     * @param smoothScroll True to smoothly scroll to the new item, false to transition immediately</span><br><span class="line">     */</span><br><span class="line">    public void setCurrentItem(int item, boolean smoothScroll) &#123;</span><br><span class="line">        mPopulatePending = false;</span><br><span class="line">        setCurrentItemInternal(item, smoothScroll, false);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getCurrentItem() &#123;</span><br><span class="line">        return mCurItem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void setCurrentItemInternal(int item, boolean smoothScroll, boolean always) &#123;</span><br><span class="line">        setCurrentItemInternal(item, smoothScroll, always, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void setCurrentItemInternal(int item, boolean smoothScroll, boolean always, int velocity) &#123;</span><br><span class="line">        if (mAdapter == null || mAdapter.getCount() &lt;= 0) &#123;</span><br><span class="line">            setScrollingCacheEnabled(false);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        if (!always &amp;&amp; mCurItem == item &amp;&amp; mItems.size() != 0) &#123;</span><br><span class="line">            setScrollingCacheEnabled(false);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (item &lt; 0) &#123;</span><br><span class="line">            item = 0;</span><br><span class="line">        &#125; else if (item &gt;= mAdapter.getCount()) &#123;</span><br><span class="line">            item = mAdapter.getCount() - 1;</span><br><span class="line">        &#125;</span><br><span class="line">        final int pageLimit = mOffscreenPageLimit;</span><br><span class="line">        if (item &gt; (mCurItem + pageLimit) || item &lt; (mCurItem - pageLimit)) &#123;</span><br><span class="line">            // We are doing a jump by more than one page.  To avoid</span><br><span class="line">            // glitches, we want to keep all current pages in the view</span><br><span class="line">            // until the scroll ends.</span><br><span class="line">            for (int i=0; i&lt;mItems.size(); i++) &#123;</span><br><span class="line">                mItems.get(i).scrolling = true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        final boolean dispatchSelected = mCurItem != item;</span><br><span class="line"></span><br><span class="line">        if (mFirstLayout) &#123;</span><br><span class="line">            // We don&apos;t have any idea how big we are yet and shouldn&apos;t have any pages either.</span><br><span class="line">            // Just set things up and let the pending layout handle things.</span><br><span class="line">            mCurItem = item;</span><br><span class="line">            if (dispatchSelected) &#123;</span><br><span class="line">                dispatchOnPageSelected(item);</span><br><span class="line">            &#125;</span><br><span class="line">            requestLayout();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            populate(item);</span><br><span class="line">            scrollToItem(item, smoothScroll, velocity, dispatchSelected);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void scrollToItem(int item, boolean smoothScroll, int velocity,</span><br><span class="line">            boolean dispatchSelected) &#123;</span><br><span class="line">        final ItemInfo curInfo = infoForPosition(item);</span><br><span class="line">        int destX = 0;</span><br><span class="line">        if (curInfo != null) &#123;</span><br><span class="line">            final int width = getClientWidth();</span><br><span class="line">            destX = (int) (width * Math.max(mFirstOffset,</span><br><span class="line">                    Math.min(curInfo.offset, mLastOffset)));</span><br><span class="line">        &#125;</span><br><span class="line">        if (smoothScroll) &#123;</span><br><span class="line">            smoothScrollTo(destX, 0, velocity);</span><br><span class="line">            if (dispatchSelected) &#123;</span><br><span class="line">                dispatchOnPageSelected(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (dispatchSelected) &#123;</span><br><span class="line">                dispatchOnPageSelected(item);</span><br><span class="line">            &#125;</span><br><span class="line">            completeScroll(false);</span><br><span class="line">            scrollTo(destX, 0);</span><br><span class="line">            pageScrolled(destX);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set a listener that will be invoked whenever the page changes or is incrementally</span><br><span class="line">     * scrolled. See &#123;@link OnPageChangeListener&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param listener Listener to set</span><br><span class="line">     *</span><br><span class="line">     * @deprecated Use &#123;@link #addOnPageChangeListener(OnPageChangeListener)&#125;</span><br><span class="line">     * and &#123;@link #removeOnPageChangeListener(OnPageChangeListener)&#125; instead.</span><br><span class="line">     */</span><br><span class="line">    @Deprecated</span><br><span class="line">    public void setOnPageChangeListener(OnPageChangeListener listener) &#123;</span><br><span class="line">        mOnPageChangeListener = listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Add a listener that will be invoked whenever the page changes or is incrementally</span><br><span class="line">     * scrolled. See &#123;@link OnPageChangeListener&#125;.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;Components that add a listener should take care to remove it when finished.</span><br><span class="line">     * Other components that take ownership of a view may call &#123;@link #clearOnPageChangeListeners()&#125;</span><br><span class="line">     * to remove all attached listeners.&lt;/p&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param listener listener to add</span><br><span class="line">     */</span><br><span class="line">    public void addOnPageChangeListener(OnPageChangeListener listener) &#123;</span><br><span class="line">        if (mOnPageChangeListeners == null) &#123;</span><br><span class="line">            mOnPageChangeListeners = new ArrayList&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        mOnPageChangeListeners.add(listener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Remove a listener that was previously added via</span><br><span class="line">     * &#123;@link #addOnPageChangeListener(OnPageChangeListener)&#125;.</span><br><span class="line">     *</span><br><span class="line">     * @param listener listener to remove</span><br><span class="line">     */</span><br><span class="line">    public void removeOnPageChangeListener(OnPageChangeListener listener) &#123;</span><br><span class="line">        if (mOnPageChangeListeners != null) &#123;</span><br><span class="line">            mOnPageChangeListeners.remove(listener);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Remove all listeners that are notified of any changes in scroll state or position.</span><br><span class="line">     */</span><br><span class="line">    public void clearOnPageChangeListeners() &#123;</span><br><span class="line">        if (mOnPageChangeListeners != null) &#123;</span><br><span class="line">            mOnPageChangeListeners.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set a &#123;@link PageTransformer&#125; that will be called for each attached page whenever</span><br><span class="line">     * the scroll position is changed. This allows the application to apply custom property</span><br><span class="line">     * transformations to each page, overriding the default sliding look and feel.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;&lt;em&gt;Note:&lt;/em&gt; Prior to Android 3.0 the property animation APIs did not exist.</span><br><span class="line">     * As a result, setting a PageTransformer prior to Android 3.0 (API 11) will have no effect.&lt;/p&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param reverseDrawingOrder true if the supplied PageTransformer requires page views</span><br><span class="line">     *                            to be drawn from last to first instead of first to last.</span><br><span class="line">     * @param transformer PageTransformer that will modify each page&apos;s animation properties</span><br><span class="line">     */</span><br><span class="line">    public void setPageTransformer(boolean reverseDrawingOrder, PageTransformer transformer) &#123;</span><br><span class="line">        if (Build.VERSION.SDK_INT &gt;= 11) &#123;</span><br><span class="line">            final boolean hasTransformer = transformer != null;</span><br><span class="line">            final boolean needsPopulate = hasTransformer != (mPageTransformer != null);</span><br><span class="line">            mPageTransformer = transformer;</span><br><span class="line">            setChildrenDrawingOrderEnabledCompat(hasTransformer);</span><br><span class="line">            if (hasTransformer) &#123;</span><br><span class="line">                mDrawingOrder = reverseDrawingOrder ? DRAW_ORDER_REVERSE : DRAW_ORDER_FORWARD;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                mDrawingOrder = DRAW_ORDER_DEFAULT;</span><br><span class="line">            &#125;</span><br><span class="line">            if (needsPopulate) populate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void setChildrenDrawingOrderEnabledCompat(boolean enable) &#123;</span><br><span class="line">        if (Build.VERSION.SDK_INT &gt;= 7) &#123;</span><br><span class="line">            if (mSetChildrenDrawingOrderEnabled == null) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    mSetChildrenDrawingOrderEnabled = ViewGroup.class.getDeclaredMethod(</span><br><span class="line">                            &quot;setChildrenDrawingOrderEnabled&quot;, new Class[] &#123; Boolean.TYPE &#125;);</span><br><span class="line">                &#125; catch (NoSuchMethodException e) &#123;</span><br><span class="line">                    Log.e(TAG, &quot;Can&apos;t find setChildrenDrawingOrderEnabled&quot;, e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            try &#123;</span><br><span class="line">                mSetChildrenDrawingOrderEnabled.invoke(this, enable);</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                Log.e(TAG, &quot;Error changing children drawing order&quot;, e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected int getChildDrawingOrder(int childCount, int i) &#123;</span><br><span class="line">        final int index = mDrawingOrder == DRAW_ORDER_REVERSE ? childCount - 1 - i : i;</span><br><span class="line">        final int result = ((LayoutParams) mDrawingOrderedChildren.get(index).getLayoutParams()).childIndex;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set a separate OnPageChangeListener for internal use by the support library.</span><br><span class="line">     *</span><br><span class="line">     * @param listener Listener to set</span><br><span class="line">     * @return The old listener that was set, if any.</span><br><span class="line">     */</span><br><span class="line">    OnPageChangeListener setInternalPageChangeListener(OnPageChangeListener listener) &#123;</span><br><span class="line">        OnPageChangeListener oldListener = mInternalPageChangeListener;</span><br><span class="line">        mInternalPageChangeListener = listener;</span><br><span class="line">        return oldListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns the number of pages that will be retained to either side of the</span><br><span class="line">     * current page in the view hierarchy in an idle state. Defaults to 1.</span><br><span class="line">     *</span><br><span class="line">     * @return How many pages will be kept offscreen on either side</span><br><span class="line">     * @see #setOffscreenPageLimit(int)</span><br><span class="line">     */</span><br><span class="line">    public int getOffscreenPageLimit() &#123;</span><br><span class="line">        return mOffscreenPageLimit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set the number of pages that should be retained to either side of the</span><br><span class="line">     * current page in the view hierarchy in an idle state. Pages beyond this</span><br><span class="line">     * limit will be recreated from the adapter when needed.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is offered as an optimization. If you know in advance the number</span><br><span class="line">     * of pages you will need to support or have lazy-loading mechanisms in place</span><br><span class="line">     * on your pages, tweaking this setting can have benefits in perceived smoothness</span><br><span class="line">     * of paging animations and interaction. If you have a small number of pages (3-4)</span><br><span class="line">     * that you can keep active all at once, less time will be spent in layout for</span><br><span class="line">     * newly created view subtrees as the user pages back and forth.&lt;/p&gt;</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;You should keep this limit low, especially if your pages have complex layouts.</span><br><span class="line">     * This setting defaults to 1.&lt;/p&gt;</span><br><span class="line">     *</span><br><span class="line">     * @param limit How many pages will be kept offscreen in an idle state.</span><br><span class="line">     */</span><br><span class="line">    public void setOffscreenPageLimit(int limit) &#123;</span><br><span class="line">        if (limit &lt; DEFAULT_OFFSCREEN_PAGES) &#123;</span><br><span class="line">            Log.w(TAG, &quot;Requested offscreen page limit &quot; + limit + &quot; too small; defaulting to &quot; +</span><br><span class="line">                    DEFAULT_OFFSCREEN_PAGES);</span><br><span class="line">            limit = DEFAULT_OFFSCREEN_PAGES;</span><br><span class="line">        &#125;</span><br><span class="line">        if (limit != mOffscreenPageLimit) &#123;</span><br><span class="line">            mOffscreenPageLimit = limit;</span><br><span class="line">            populate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set the margin between pages.</span><br><span class="line">     *</span><br><span class="line">     * @param marginPixels Distance between adjacent pages in pixels</span><br><span class="line">     * @see #getPageMargin()</span><br><span class="line">     * @see #setPageMarginDrawable(Drawable)</span><br><span class="line">     * @see #setPageMarginDrawable(int)</span><br><span class="line">     */</span><br><span class="line">    public void setPageMargin(int marginPixels) &#123;</span><br><span class="line">        final int oldMargin = mPageMargin;</span><br><span class="line">        mPageMargin = marginPixels;</span><br><span class="line"></span><br><span class="line">        final int width = getWidth();</span><br><span class="line">        recomputeScrollPosition(width, width, marginPixels, oldMargin);</span><br><span class="line"></span><br><span class="line">        requestLayout();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Return the margin between pages.</span><br><span class="line">     *</span><br><span class="line">     * @return The size of the margin in pixels</span><br><span class="line">     */</span><br><span class="line">    public int getPageMargin() &#123;</span><br><span class="line">        return mPageMargin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set a drawable that will be used to fill the margin between pages.</span><br><span class="line">     *</span><br><span class="line">     * @param d Drawable to display between pages</span><br><span class="line">     */</span><br><span class="line">    public void setPageMarginDrawable(Drawable d) &#123;</span><br><span class="line">        mMarginDrawable = d;</span><br><span class="line">        if (d != null) refreshDrawableState();</span><br><span class="line">        setWillNotDraw(d == null);</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Set a drawable that will be used to fill the margin between pages.</span><br><span class="line">     *</span><br><span class="line">     * @param resId Resource ID of a drawable to display between pages</span><br><span class="line">     */</span><br><span class="line">    public void setPageMarginDrawable(@DrawableRes int resId) &#123;</span><br><span class="line">        setPageMarginDrawable(getContext().getResources().getDrawable(resId));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected boolean verifyDrawable(Drawable who) &#123;</span><br><span class="line">        return super.verifyDrawable(who) || who == mMarginDrawable;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void drawableStateChanged() &#123;</span><br><span class="line">        super.drawableStateChanged();</span><br><span class="line">        final Drawable d = mMarginDrawable;</span><br><span class="line">        if (d != null &amp;&amp; d.isStateful()) &#123;</span><br><span class="line">            d.setState(getDrawableState());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // We want the duration of the page snap animation to be influenced by the distance that</span><br><span class="line">    // the screen has to travel, however, we don&apos;t want this duration to be effected in a</span><br><span class="line">    // purely linear fashion. Instead, we use this method to moderate the effect that the distance</span><br><span class="line">    // of travel has on the overall snap duration.</span><br><span class="line">    float distanceInfluenceForSnapDuration(float f) &#123;</span><br><span class="line">        f -= 0.5f; // center the values about 0.</span><br><span class="line">        f *= 0.3f * Math.PI / 2.0f;</span><br><span class="line">        return (float) Math.sin(f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Like &#123;@link View#scrollBy&#125;, but scroll smoothly instead of immediately.</span><br><span class="line">     *</span><br><span class="line">     * @param x the number of pixels to scroll by on the X axis</span><br><span class="line">     * @param y the number of pixels to scroll by on the Y axis</span><br><span class="line">     */</span><br><span class="line">    void smoothScrollTo(int x, int y) &#123;</span><br><span class="line">        smoothScrollTo(x, y, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Like &#123;@link View#scrollBy&#125;, but scroll smoothly instead of immediately.</span><br><span class="line">     *</span><br><span class="line">     * @param x the number of pixels to scroll by on the X axis</span><br><span class="line">     * @param y the number of pixels to scroll by on the Y axis</span><br><span class="line">     * @param velocity the velocity associated with a fling, if applicable. (0 otherwise)</span><br><span class="line">     */</span><br><span class="line">    void smoothScrollTo(int x, int y, int velocity) &#123;</span><br><span class="line">        if (getChildCount() == 0) &#123;</span><br><span class="line">            // Nothing to do.</span><br><span class="line">            setScrollingCacheEnabled(false);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int sx;</span><br><span class="line">        boolean wasScrolling = (mScroller != null) &amp;&amp; !mScroller.isFinished();</span><br><span class="line">        if (wasScrolling) &#123;</span><br><span class="line">            // We&apos;re in the middle of a previously initiated scrolling. Check to see</span><br><span class="line">            // whether that scrolling has actually started (if we always call getStartX</span><br><span class="line">            // we can get a stale value from the scroller if it hadn&apos;t yet had its first</span><br><span class="line">            // computeScrollOffset call) to decide what is the current scrolling position.</span><br><span class="line">            sx = mIsScrollStarted ? mScroller.getCurrX() : mScroller.getStartX();</span><br><span class="line">            // And abort the current scrolling.</span><br><span class="line">            mScroller.abortAnimation();</span><br><span class="line">            setScrollingCacheEnabled(false);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            sx = getScrollX();</span><br><span class="line">        &#125;</span><br><span class="line">        int sy = getScrollY();</span><br><span class="line">        int dx = x - sx;</span><br><span class="line">        int dy = y - sy;</span><br><span class="line">        if (dx == 0 &amp;&amp; dy == 0) &#123;</span><br><span class="line">            completeScroll(false);</span><br><span class="line">            populate();</span><br><span class="line">            setScrollState(SCROLL_STATE_IDLE);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        setScrollingCacheEnabled(true);</span><br><span class="line">        setScrollState(SCROLL_STATE_SETTLING);</span><br><span class="line"></span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line">        final int halfWidth = width / 2;</span><br><span class="line">        final float distanceRatio = Math.min(1f, 1.0f * Math.abs(dx) / width);</span><br><span class="line">        final float distance = halfWidth + halfWidth *</span><br><span class="line">                distanceInfluenceForSnapDuration(distanceRatio);</span><br><span class="line"></span><br><span class="line">        int duration;</span><br><span class="line">        velocity = Math.abs(velocity);</span><br><span class="line">        if (velocity &gt; 0) &#123;</span><br><span class="line">            duration = 4 * Math.round(1000 * Math.abs(distance / velocity));</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            final float pageWidth = width * mAdapter.getPageWidth(mCurItem);</span><br><span class="line">            final float pageDelta = (float) Math.abs(dx) / (pageWidth + mPageMargin);</span><br><span class="line">            duration = (int) ((pageDelta + 1) * 100);</span><br><span class="line">        &#125;</span><br><span class="line">        duration = Math.min(duration, MAX_SETTLE_DURATION);</span><br><span class="line"></span><br><span class="line">        // Reset the &quot;scroll started&quot; flag. It will be flipped to true in all places</span><br><span class="line">        // where we call computeScrollOffset().</span><br><span class="line">        mIsScrollStarted = false;</span><br><span class="line">        mScroller.startScroll(sx, sy, dx, dy, duration);</span><br><span class="line">        ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ItemInfo addNewItem(int position, int index) &#123;</span><br><span class="line">        ItemInfo ii = new ItemInfo();</span><br><span class="line">        ii.position = position;</span><br><span class="line">        ii.object = mAdapter.instantiateItem(this, position);</span><br><span class="line">        ii.widthFactor = mAdapter.getPageWidth(position);</span><br><span class="line">        if (index &lt; 0 || index &gt;= mItems.size()) &#123;</span><br><span class="line">            mItems.add(ii);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mItems.add(index, ii);</span><br><span class="line">        &#125;</span><br><span class="line">        return ii;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void dataSetChanged() &#123;</span><br><span class="line">        // This method only gets called if our observer is attached, so mAdapter is non-null.</span><br><span class="line"></span><br><span class="line">        final int adapterCount = mAdapter.getCount();</span><br><span class="line">        mExpectedAdapterCount = adapterCount;</span><br><span class="line">        boolean needPopulate = mItems.size() &lt; mOffscreenPageLimit * 2 + 1 &amp;&amp;</span><br><span class="line">                mItems.size() &lt; adapterCount;</span><br><span class="line">        int newCurrItem = mCurItem;</span><br><span class="line"></span><br><span class="line">        boolean isUpdating = false;</span><br><span class="line">        for (int i = 0; i &lt; mItems.size(); i++) &#123;</span><br><span class="line">            final ItemInfo ii = mItems.get(i);</span><br><span class="line">            final int newPos = mAdapter.getItemPosition(ii.object);</span><br><span class="line"></span><br><span class="line">            if (newPos == PagerAdapter.POSITION_UNCHANGED) &#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (newPos == PagerAdapter.POSITION_NONE) &#123;</span><br><span class="line">                mItems.remove(i);</span><br><span class="line">                i--;</span><br><span class="line"></span><br><span class="line">                if (!isUpdating) &#123;</span><br><span class="line">                    mAdapter.startUpdate(this);</span><br><span class="line">                    isUpdating = true;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                mAdapter.destroyItem(this, ii.position, ii.object);</span><br><span class="line">                needPopulate = true;</span><br><span class="line"></span><br><span class="line">                if (mCurItem == ii.position) &#123;</span><br><span class="line">                    // Keep the current item in the valid range</span><br><span class="line">                    newCurrItem = Math.max(0, Math.min(mCurItem, adapterCount - 1));</span><br><span class="line">                    needPopulate = true;</span><br><span class="line">                &#125;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (ii.position != newPos) &#123;</span><br><span class="line">                if (ii.position == mCurItem) &#123;</span><br><span class="line">                    // Our current item changed position. Follow it.</span><br><span class="line">                    newCurrItem = newPos;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                ii.position = newPos;</span><br><span class="line">                needPopulate = true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (isUpdating) &#123;</span><br><span class="line">            mAdapter.finishUpdate(this);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Collections.sort(mItems, COMPARATOR);</span><br><span class="line"></span><br><span class="line">        if (needPopulate) &#123;</span><br><span class="line">            // Reset our known page widths; populate will recompute them.</span><br><span class="line">            final int childCount = getChildCount();</span><br><span class="line">            for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">                final View child = getChildAt(i);</span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">                if (!lp.isDecor) &#123;</span><br><span class="line">                    lp.widthFactor = 0.f;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setCurrentItemInternal(newCurrItem, false, true);</span><br><span class="line">            requestLayout();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void populate() &#123;</span><br><span class="line">        populate(mCurItem);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void populate(int newCurrentItem) &#123;</span><br><span class="line">        ItemInfo oldCurInfo = null;</span><br><span class="line">        if (mCurItem != newCurrentItem) &#123;</span><br><span class="line">            oldCurInfo = infoForPosition(mCurItem);</span><br><span class="line">            mCurItem = newCurrentItem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mAdapter == null) &#123;</span><br><span class="line">            sortChildDrawingOrder();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Bail now if we are waiting to populate.  This is to hold off</span><br><span class="line">        // on creating views from the time the user releases their finger to</span><br><span class="line">        // fling to a new position until we have finished the scroll to</span><br><span class="line">        // that position, avoiding glitches from happening at that point.</span><br><span class="line">        if (mPopulatePending) &#123;</span><br><span class="line">            if (DEBUG) Log.i(TAG, &quot;populate is pending, skipping for now...&quot;);</span><br><span class="line">            sortChildDrawingOrder();</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Also, don&apos;t populate until we are attached to a window.  This is to</span><br><span class="line">        // avoid trying to populate before we have restored our view hierarchy</span><br><span class="line">        // state and conflicting with what is restored.</span><br><span class="line">        if (getWindowToken() == null) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mAdapter.startUpdate(this);</span><br><span class="line"></span><br><span class="line">        final int pageLimit = mOffscreenPageLimit;</span><br><span class="line">        final int startPos = Math.max(0, mCurItem - pageLimit);</span><br><span class="line">        final int N = mAdapter.getCount();</span><br><span class="line">        final int endPos = Math.min(N-1, mCurItem + pageLimit);</span><br><span class="line"></span><br><span class="line">        if (N != mExpectedAdapterCount) &#123;</span><br><span class="line">            String resName;</span><br><span class="line">            try &#123;</span><br><span class="line">                resName = getResources().getResourceName(getId());</span><br><span class="line">            &#125; catch (Resources.NotFoundException e) &#123;</span><br><span class="line">                resName = Integer.toHexString(getId());</span><br><span class="line">            &#125;</span><br><span class="line">            throw new IllegalStateException(&quot;The application&apos;s PagerAdapter changed the adapter&apos;s&quot; +</span><br><span class="line">                    &quot; contents without calling PagerAdapter#notifyDataSetChanged!&quot; +</span><br><span class="line">                    &quot; Expected adapter item count: &quot; + mExpectedAdapterCount + &quot;, found: &quot; + N +</span><br><span class="line">                    &quot; Pager id: &quot; + resName +</span><br><span class="line">                    &quot; Pager class: &quot; + getClass() +</span><br><span class="line">                    &quot; Problematic adapter: &quot; + mAdapter.getClass());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Locate the currently focused item or add it if needed.</span><br><span class="line">        int curIndex = -1;</span><br><span class="line">        ItemInfo curItem = null;</span><br><span class="line">        for (curIndex = 0; curIndex &lt; mItems.size(); curIndex++) &#123;</span><br><span class="line">            final ItemInfo ii = mItems.get(curIndex);</span><br><span class="line">            if (ii.position &gt;= mCurItem) &#123;</span><br><span class="line">                if (ii.position == mCurItem) curItem = ii;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (curItem == null &amp;&amp; N &gt; 0) &#123;</span><br><span class="line">            curItem = addNewItem(mCurItem, curIndex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Fill 3x the available width or up to the number of offscreen</span><br><span class="line">        // pages requested to either side, whichever is larger.</span><br><span class="line">        // If we have no current item we have no work to do.</span><br><span class="line">        if (curItem != null) &#123;</span><br><span class="line">            float extraWidthLeft = 0.f;</span><br><span class="line">            int itemIndex = curIndex - 1;</span><br><span class="line">            ItemInfo ii = itemIndex &gt;= 0 ? mItems.get(itemIndex) : null;</span><br><span class="line">            final int clientWidth = getClientWidth();</span><br><span class="line">            final float leftWidthNeeded = clientWidth &lt;= 0 ? 0 :</span><br><span class="line">                    2.f - curItem.widthFactor + (float) getPaddingLeft() / (float) clientWidth;</span><br><span class="line">            for (int pos = mCurItem - 1; pos &gt;= 0; pos--) &#123;</span><br><span class="line">                if (extraWidthLeft &gt;= leftWidthNeeded &amp;&amp; pos &lt; startPos) &#123;</span><br><span class="line">                    if (ii == null) &#123;</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if (pos == ii.position &amp;&amp; !ii.scrolling) &#123;</span><br><span class="line">                        mItems.remove(itemIndex);</span><br><span class="line">                        mAdapter.destroyItem(this, pos, ii.object);</span><br><span class="line">                        if (DEBUG) &#123;</span><br><span class="line">                            Log.i(TAG, &quot;populate() - destroyItem() with pos: &quot; + pos +</span><br><span class="line">                                    &quot; view: &quot; + ((View) ii.object));</span><br><span class="line">                        &#125;</span><br><span class="line">                        itemIndex--;</span><br><span class="line">                        curIndex--;</span><br><span class="line">                        ii = itemIndex &gt;= 0 ? mItems.get(itemIndex) : null;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else if (ii != null &amp;&amp; pos == ii.position) &#123;</span><br><span class="line">                    extraWidthLeft += ii.widthFactor;</span><br><span class="line">                    itemIndex--;</span><br><span class="line">                    ii = itemIndex &gt;= 0 ? mItems.get(itemIndex) : null;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    ii = addNewItem(pos, itemIndex + 1);</span><br><span class="line">                    extraWidthLeft += ii.widthFactor;</span><br><span class="line">                    curIndex++;</span><br><span class="line">                    ii = itemIndex &gt;= 0 ? mItems.get(itemIndex) : null;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            float extraWidthRight = curItem.widthFactor;</span><br><span class="line">            itemIndex = curIndex + 1;</span><br><span class="line">            if (extraWidthRight &lt; 2.f) &#123;</span><br><span class="line">                ii = itemIndex &lt; mItems.size() ? mItems.get(itemIndex) : null;</span><br><span class="line">                final float rightWidthNeeded = clientWidth &lt;= 0 ? 0 :</span><br><span class="line">                        (float) getPaddingRight() / (float) clientWidth + 2.f;</span><br><span class="line">                for (int pos = mCurItem + 1; pos &lt; N; pos++) &#123;</span><br><span class="line">                    if (extraWidthRight &gt;= rightWidthNeeded &amp;&amp; pos &gt; endPos) &#123;</span><br><span class="line">                        if (ii == null) &#123;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                        if (pos == ii.position &amp;&amp; !ii.scrolling) &#123;</span><br><span class="line">                            mItems.remove(itemIndex);</span><br><span class="line">                            mAdapter.destroyItem(this, pos, ii.object);</span><br><span class="line">                            if (DEBUG) &#123;</span><br><span class="line">                                Log.i(TAG, &quot;populate() - destroyItem() with pos: &quot; + pos +</span><br><span class="line">                                        &quot; view: &quot; + ((View) ii.object));</span><br><span class="line">                            &#125;</span><br><span class="line">                            ii = itemIndex &lt; mItems.size() ? mItems.get(itemIndex) : null;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; else if (ii != null &amp;&amp; pos == ii.position) &#123;</span><br><span class="line">                        extraWidthRight += ii.widthFactor;</span><br><span class="line">                        itemIndex++;</span><br><span class="line">                        ii = itemIndex &lt; mItems.size() ? mItems.get(itemIndex) : null;</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        ii = addNewItem(pos, itemIndex);</span><br><span class="line">                        itemIndex++;</span><br><span class="line">                        extraWidthRight += ii.widthFactor;</span><br><span class="line">                        ii = itemIndex &lt; mItems.size() ? mItems.get(itemIndex) : null;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            calculatePageOffsets(curItem, curIndex, oldCurInfo);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (DEBUG) &#123;</span><br><span class="line">            Log.i(TAG, &quot;Current page list:&quot;);</span><br><span class="line">            for (int i=0; i&lt;mItems.size(); i++) &#123;</span><br><span class="line">                Log.i(TAG, &quot;#&quot; + i + &quot;: page &quot; + mItems.get(i).position);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mAdapter.setPrimaryItem(this, mCurItem, curItem != null ? curItem.object : null);</span><br><span class="line"></span><br><span class="line">        mAdapter.finishUpdate(this);</span><br><span class="line"></span><br><span class="line">        // Check width measurement of current pages and drawing sort order.</span><br><span class="line">        // Update LayoutParams as needed.</span><br><span class="line">        final int childCount = getChildCount();</span><br><span class="line">        for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">            lp.childIndex = i;</span><br><span class="line">            if (!lp.isDecor &amp;&amp; lp.widthFactor == 0.f) &#123;</span><br><span class="line">                // 0 means requery the adapter for this, it doesn&apos;t have a valid width.</span><br><span class="line">                final ItemInfo ii = infoForChild(child);</span><br><span class="line">                if (ii != null) &#123;</span><br><span class="line">                    lp.widthFactor = ii.widthFactor;</span><br><span class="line">                    lp.position = ii.position;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sortChildDrawingOrder();</span><br><span class="line"></span><br><span class="line">        if (hasFocus()) &#123;</span><br><span class="line">            View currentFocused = findFocus();</span><br><span class="line">            ItemInfo ii = currentFocused != null ? infoForAnyChild(currentFocused) : null;</span><br><span class="line">            if (ii == null || ii.position != mCurItem) &#123;</span><br><span class="line">                for (int i=0; i&lt;getChildCount(); i++) &#123;</span><br><span class="line">                    View child = getChildAt(i);</span><br><span class="line">                    ii = infoForChild(child);</span><br><span class="line">                    if (ii != null &amp;&amp; ii.position == mCurItem) &#123;</span><br><span class="line">                        if (child.requestFocus(View.FOCUS_FORWARD)) &#123;</span><br><span class="line">                            break;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void sortChildDrawingOrder() &#123;</span><br><span class="line">        if (mDrawingOrder != DRAW_ORDER_DEFAULT) &#123;</span><br><span class="line">            if (mDrawingOrderedChildren == null) &#123;</span><br><span class="line">                mDrawingOrderedChildren = new ArrayList&lt;View&gt;();</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                mDrawingOrderedChildren.clear();</span><br><span class="line">            &#125;</span><br><span class="line">            final int childCount = getChildCount();</span><br><span class="line">            for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">                final View child = getChildAt(i);</span><br><span class="line">                mDrawingOrderedChildren.add(child);</span><br><span class="line">            &#125;</span><br><span class="line">            Collections.sort(mDrawingOrderedChildren, sPositionComparator);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void calculatePageOffsets(ItemInfo curItem, int curIndex, ItemInfo oldCurInfo) &#123;</span><br><span class="line">        final int N = mAdapter.getCount();</span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line">        final float marginOffset = width &gt; 0 ? (float) mPageMargin / width : 0;</span><br><span class="line">        // Fix up offsets for later layout.</span><br><span class="line">        if (oldCurInfo != null) &#123;</span><br><span class="line">            final int oldCurPosition = oldCurInfo.position;</span><br><span class="line">            // Base offsets off of oldCurInfo.</span><br><span class="line">            if (oldCurPosition &lt; curItem.position) &#123;</span><br><span class="line">                int itemIndex = 0;</span><br><span class="line">                ItemInfo ii = null;</span><br><span class="line">                float offset = oldCurInfo.offset + oldCurInfo.widthFactor + marginOffset;</span><br><span class="line">                for (int pos = oldCurPosition + 1;</span><br><span class="line">                        pos &lt;= curItem.position &amp;&amp; itemIndex &lt; mItems.size(); pos++) &#123;</span><br><span class="line">                    ii = mItems.get(itemIndex);</span><br><span class="line">                    while (pos &gt; ii.position &amp;&amp; itemIndex &lt; mItems.size() - 1) &#123;</span><br><span class="line">                        itemIndex++;</span><br><span class="line">                        ii = mItems.get(itemIndex);</span><br><span class="line">                    &#125;</span><br><span class="line">                    while (pos &lt; ii.position) &#123;</span><br><span class="line">                        // We don&apos;t have an item populated for this,</span><br><span class="line">                        // ask the adapter for an offset.</span><br><span class="line">                        offset += mAdapter.getPageWidth(pos) + marginOffset;</span><br><span class="line">                        pos++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ii.offset = offset;</span><br><span class="line">                    offset += ii.widthFactor + marginOffset;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else if (oldCurPosition &gt; curItem.position) &#123;</span><br><span class="line">                int itemIndex = mItems.size() - 1;</span><br><span class="line">                ItemInfo ii = null;</span><br><span class="line">                float offset = oldCurInfo.offset;</span><br><span class="line">                for (int pos = oldCurPosition - 1;</span><br><span class="line">                        pos &gt;= curItem.position &amp;&amp; itemIndex &gt;= 0; pos--) &#123;</span><br><span class="line">                    ii = mItems.get(itemIndex);</span><br><span class="line">                    while (pos &lt; ii.position &amp;&amp; itemIndex &gt; 0) &#123;</span><br><span class="line">                        itemIndex--;</span><br><span class="line">                        ii = mItems.get(itemIndex);</span><br><span class="line">                    &#125;</span><br><span class="line">                    while (pos &gt; ii.position) &#123;</span><br><span class="line">                        // We don&apos;t have an item populated for this,</span><br><span class="line">                        // ask the adapter for an offset.</span><br><span class="line">                        offset -= mAdapter.getPageWidth(pos) + marginOffset;</span><br><span class="line">                        pos--;</span><br><span class="line">                    &#125;</span><br><span class="line">                    offset -= ii.widthFactor + marginOffset;</span><br><span class="line">                    ii.offset = offset;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Base all offsets off of curItem.</span><br><span class="line">        final int itemCount = mItems.size();</span><br><span class="line">        float offset = curItem.offset;</span><br><span class="line">        int pos = curItem.position - 1;</span><br><span class="line">        mFirstOffset = curItem.position == 0 ? curItem.offset : -Float.MAX_VALUE;</span><br><span class="line">        mLastOffset = curItem.position == N - 1 ?</span><br><span class="line">                curItem.offset + curItem.widthFactor - 1 : Float.MAX_VALUE;</span><br><span class="line">        // Previous pages</span><br><span class="line">        for (int i = curIndex - 1; i &gt;= 0; i--, pos--) &#123;</span><br><span class="line">            final ItemInfo ii = mItems.get(i);</span><br><span class="line">            while (pos &gt; ii.position) &#123;</span><br><span class="line">                offset -= mAdapter.getPageWidth(pos--) + marginOffset;</span><br><span class="line">            &#125;</span><br><span class="line">            offset -= ii.widthFactor + marginOffset;</span><br><span class="line">            ii.offset = offset;</span><br><span class="line">            if (ii.position == 0) mFirstOffset = offset;</span><br><span class="line">        &#125;</span><br><span class="line">        offset = curItem.offset + curItem.widthFactor + marginOffset;</span><br><span class="line">        pos = curItem.position + 1;</span><br><span class="line">        // Next pages</span><br><span class="line">        for (int i = curIndex + 1; i &lt; itemCount; i++, pos++) &#123;</span><br><span class="line">            final ItemInfo ii = mItems.get(i);</span><br><span class="line">            while (pos &lt; ii.position) &#123;</span><br><span class="line">                offset += mAdapter.getPageWidth(pos++) + marginOffset;</span><br><span class="line">            &#125;</span><br><span class="line">            if (ii.position == N - 1) &#123;</span><br><span class="line">                mLastOffset = offset + ii.widthFactor - 1;</span><br><span class="line">            &#125;</span><br><span class="line">            ii.offset = offset;</span><br><span class="line">            offset += ii.widthFactor + marginOffset;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mNeedCalculatePageOffsets = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * This is the persistent state that is saved by ViewPager.  Only needed</span><br><span class="line">     * if you are creating a sublass of ViewPager that must save its own</span><br><span class="line">     * state, in which case it should implement a subclass of this which</span><br><span class="line">     * contains that state.</span><br><span class="line">     */</span><br><span class="line">    public static class SavedState extends BaseSavedState &#123;</span><br><span class="line">        int position;</span><br><span class="line">        Parcelable adapterState;</span><br><span class="line">        ClassLoader loader;</span><br><span class="line"></span><br><span class="line">        public SavedState(Parcelable superState) &#123;</span><br><span class="line">            super(superState);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void writeToParcel(Parcel out, int flags) &#123;</span><br><span class="line">            super.writeToParcel(out, flags);</span><br><span class="line">            out.writeInt(position);</span><br><span class="line">            out.writeParcelable(adapterState, flags);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public String toString() &#123;</span><br><span class="line">            return &quot;FragmentPager.SavedState&#123;&quot;</span><br><span class="line">                    + Integer.toHexString(System.identityHashCode(this))</span><br><span class="line">                    + &quot; position=&quot; + position + &quot;&#125;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public static final Parcelable.Creator&lt;SavedState&gt; CREATOR</span><br><span class="line">                = ParcelableCompat.newCreator(new ParcelableCompatCreatorCallbacks&lt;SavedState&gt;() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public SavedState createFromParcel(Parcel in, ClassLoader loader) &#123;</span><br><span class="line">                        return new SavedState(in, loader);</span><br><span class="line">                    &#125;</span><br><span class="line">                    @Override</span><br><span class="line">                    public SavedState[] newArray(int size) &#123;</span><br><span class="line">                        return new SavedState[size];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">        SavedState(Parcel in, ClassLoader loader) &#123;</span><br><span class="line">            super(in);</span><br><span class="line">            if (loader == null) &#123;</span><br><span class="line">                loader = getClass().getClassLoader();</span><br><span class="line">            &#125;</span><br><span class="line">            position = in.readInt();</span><br><span class="line">            adapterState = in.readParcelable(loader);</span><br><span class="line">            this.loader = loader;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Parcelable onSaveInstanceState() &#123;</span><br><span class="line">        Parcelable superState = super.onSaveInstanceState();</span><br><span class="line">        SavedState ss = new SavedState(superState);</span><br><span class="line">        ss.position = mCurItem;</span><br><span class="line">        if (mAdapter != null) &#123;</span><br><span class="line">            ss.adapterState = mAdapter.saveState();</span><br><span class="line">        &#125;</span><br><span class="line">        return ss;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onRestoreInstanceState(Parcelable state) &#123;</span><br><span class="line">        if (!(state instanceof SavedState)) &#123;</span><br><span class="line">            super.onRestoreInstanceState(state);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        SavedState ss = (SavedState)state;</span><br><span class="line">        super.onRestoreInstanceState(ss.getSuperState());</span><br><span class="line"></span><br><span class="line">        if (mAdapter != null) &#123;</span><br><span class="line">            mAdapter.restoreState(ss.adapterState, ss.loader);</span><br><span class="line">            setCurrentItemInternal(ss.position, false, true);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mRestoredCurItem = ss.position;</span><br><span class="line">            mRestoredAdapterState = ss.adapterState;</span><br><span class="line">            mRestoredClassLoader = ss.loader;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void addView(View child, int index, ViewGroup.LayoutParams params) &#123;</span><br><span class="line">        if (!checkLayoutParams(params)) &#123;</span><br><span class="line">            params = generateLayoutParams(params);</span><br><span class="line">        &#125;</span><br><span class="line">        final LayoutParams lp = (LayoutParams) params;</span><br><span class="line">        lp.isDecor |= child instanceof Decor;</span><br><span class="line">        if (mInLayout) &#123;</span><br><span class="line">            if (lp != null &amp;&amp; lp.isDecor) &#123;</span><br><span class="line">                throw new IllegalStateException(&quot;Cannot add pager decor view during layout&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            lp.needsMeasure = true;</span><br><span class="line">            addViewInLayout(child, index, params);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            super.addView(child, index, params);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (USE_CACHE) &#123;</span><br><span class="line">            if (child.getVisibility() != GONE) &#123;</span><br><span class="line">                child.setDrawingCacheEnabled(mScrollingCacheEnabled);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                child.setDrawingCacheEnabled(false);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void removeView(View view) &#123;</span><br><span class="line">        if (mInLayout) &#123;</span><br><span class="line">            removeViewInLayout(view);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            super.removeView(view);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ItemInfo infoForChild(View child) &#123;</span><br><span class="line">        for (int i=0; i&lt;mItems.size(); i++) &#123;</span><br><span class="line">            ItemInfo ii = mItems.get(i);</span><br><span class="line">            if (mAdapter.isViewFromObject(child, ii.object)) &#123;</span><br><span class="line">                return ii;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ItemInfo infoForAnyChild(View child) &#123;</span><br><span class="line">        ViewParent parent;</span><br><span class="line">        while ((parent=child.getParent()) != this) &#123;</span><br><span class="line">            if (parent == null || !(parent instanceof View)) &#123;</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">            child = (View)parent;</span><br><span class="line">        &#125;</span><br><span class="line">        return infoForChild(child);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ItemInfo infoForPosition(int position) &#123;</span><br><span class="line">        for (int i = 0; i &lt; mItems.size(); i++) &#123;</span><br><span class="line">            ItemInfo ii = mItems.get(i);</span><br><span class="line">            if (ii.position == position) &#123;</span><br><span class="line">                return ii;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onAttachedToWindow() &#123;</span><br><span class="line">        super.onAttachedToWindow();</span><br><span class="line">        mFirstLayout = true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">        // For simple implementation, our internal size is always 0.</span><br><span class="line">        // We depend on the container to specify the layout size of</span><br><span class="line">        // our view.  We can&apos;t really know what it is since we will be</span><br><span class="line">        // adding and removing different arbitrary views and do not</span><br><span class="line">        // want the layout to change as this happens.</span><br><span class="line">        setMeasuredDimension(getDefaultSize(0, widthMeasureSpec),</span><br><span class="line">                getDefaultSize(0, heightMeasureSpec));</span><br><span class="line"></span><br><span class="line">        final int measuredWidth = getMeasuredWidth();</span><br><span class="line">        final int maxGutterSize = measuredWidth / 10;</span><br><span class="line">        mGutterSize = Math.min(maxGutterSize, mDefaultGutterSize);</span><br><span class="line"></span><br><span class="line">        // Children are just made to fill our space.</span><br><span class="line">        int childWidthSize = measuredWidth - getPaddingLeft() - getPaddingRight();</span><br><span class="line">        int childHeightSize = getMeasuredHeight() - getPaddingTop() - getPaddingBottom();</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">         * Make sure all children have been properly measured. Decor views first.</span><br><span class="line">         * Right now we cheat and make this less complicated by assuming decor</span><br><span class="line">         * views won&apos;t intersect. We will pin to edges based on gravity.</span><br><span class="line">         */</span><br><span class="line">        int size = getChildCount();</span><br><span class="line">        for (int i = 0; i &lt; size; ++i) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() != GONE) &#123;</span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">                if (lp != null &amp;&amp; lp.isDecor) &#123;</span><br><span class="line">                    final int hgrav = lp.gravity &amp; Gravity.HORIZONTAL_GRAVITY_MASK;</span><br><span class="line">                    final int vgrav = lp.gravity &amp; Gravity.VERTICAL_GRAVITY_MASK;</span><br><span class="line">                    int widthMode = MeasureSpec.AT_MOST;</span><br><span class="line">                    int heightMode = MeasureSpec.AT_MOST;</span><br><span class="line">                    boolean consumeVertical = vgrav == Gravity.TOP || vgrav == Gravity.BOTTOM;</span><br><span class="line">                    boolean consumeHorizontal = hgrav == Gravity.LEFT || hgrav == Gravity.RIGHT;</span><br><span class="line"></span><br><span class="line">                    if (consumeVertical) &#123;</span><br><span class="line">                        widthMode = MeasureSpec.EXACTLY;</span><br><span class="line">                    &#125; else if (consumeHorizontal) &#123;</span><br><span class="line">                        heightMode = MeasureSpec.EXACTLY;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    int widthSize = childWidthSize;</span><br><span class="line">                    int heightSize = childHeightSize;</span><br><span class="line">                    if (lp.width != LayoutParams.WRAP_CONTENT) &#123;</span><br><span class="line">                        widthMode = MeasureSpec.EXACTLY;</span><br><span class="line">                        if (lp.width != LayoutParams.FILL_PARENT) &#123;</span><br><span class="line">                            widthSize = lp.width;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    if (lp.height != LayoutParams.WRAP_CONTENT) &#123;</span><br><span class="line">                        heightMode = MeasureSpec.EXACTLY;</span><br><span class="line">                        if (lp.height != LayoutParams.FILL_PARENT) &#123;</span><br><span class="line">                            heightSize = lp.height;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    final int widthSpec = MeasureSpec.makeMeasureSpec(widthSize, widthMode);</span><br><span class="line">                    final int heightSpec = MeasureSpec.makeMeasureSpec(heightSize, heightMode);</span><br><span class="line">                    child.measure(widthSpec, heightSpec);</span><br><span class="line"></span><br><span class="line">                    if (consumeVertical) &#123;</span><br><span class="line">                        childHeightSize -= child.getMeasuredHeight();</span><br><span class="line">                    &#125; else if (consumeHorizontal) &#123;</span><br><span class="line">                        childWidthSize -= child.getMeasuredWidth();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mChildWidthMeasureSpec = MeasureSpec.makeMeasureSpec(childWidthSize, MeasureSpec.EXACTLY);</span><br><span class="line">        mChildHeightMeasureSpec = MeasureSpec.makeMeasureSpec(childHeightSize, MeasureSpec.EXACTLY);</span><br><span class="line"></span><br><span class="line">        // Make sure we have created all fragments that we need to have shown.</span><br><span class="line">        mInLayout = true;</span><br><span class="line">        populate();</span><br><span class="line">        mInLayout = false;</span><br><span class="line"></span><br><span class="line">        // Page views next.</span><br><span class="line">        size = getChildCount();</span><br><span class="line">        for (int i = 0; i &lt; size; ++i) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() != GONE) &#123;</span><br><span class="line">                if (DEBUG) Log.v(TAG, &quot;Measuring #&quot; + i + &quot; &quot; + child</span><br><span class="line">                        + &quot;: &quot; + mChildWidthMeasureSpec);</span><br><span class="line"></span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">                if (lp == null || !lp.isDecor) &#123;</span><br><span class="line">                    final int widthSpec = MeasureSpec.makeMeasureSpec(</span><br><span class="line">                            (int) (childWidthSize * lp.widthFactor), MeasureSpec.EXACTLY);</span><br><span class="line">                    child.measure(widthSpec, mChildHeightMeasureSpec);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onSizeChanged(int w, int h, int oldw, int oldh) &#123;</span><br><span class="line">        super.onSizeChanged(w, h, oldw, oldh);</span><br><span class="line"></span><br><span class="line">        // Make sure scroll position is set correctly.</span><br><span class="line">        if (w != oldw) &#123;</span><br><span class="line">            recomputeScrollPosition(w, oldw, mPageMargin, mPageMargin);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void recomputeScrollPosition(int width, int oldWidth, int margin, int oldMargin) &#123;</span><br><span class="line">        if (oldWidth &gt; 0 &amp;&amp; !mItems.isEmpty()) &#123;</span><br><span class="line">            if (!mScroller.isFinished()) &#123;</span><br><span class="line">                mScroller.setFinalX(getCurrentItem() * getClientWidth());</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                final int widthWithMargin = width - getPaddingLeft() - getPaddingRight() + margin;</span><br><span class="line">                final int oldWidthWithMargin = oldWidth - getPaddingLeft() - getPaddingRight()</span><br><span class="line">                        + oldMargin;</span><br><span class="line">                final int xpos = getScrollX();</span><br><span class="line">                final float pageOffset = (float) xpos / oldWidthWithMargin;</span><br><span class="line">                final int newOffsetPixels = (int) (pageOffset * widthWithMargin);</span><br><span class="line"></span><br><span class="line">                scrollTo(newOffsetPixels, getScrollY());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            final ItemInfo ii = infoForPosition(mCurItem);</span><br><span class="line">            final float scrollOffset = ii != null ? Math.min(ii.offset, mLastOffset) : 0;</span><br><span class="line">            final int scrollPos = (int) (scrollOffset *</span><br><span class="line">                                         (width - getPaddingLeft() - getPaddingRight()));</span><br><span class="line">            if (scrollPos != getScrollX()) &#123;</span><br><span class="line">                completeScroll(false);</span><br><span class="line">                scrollTo(scrollPos, getScrollY());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onLayout(boolean changed, int l, int t, int r, int b) &#123;</span><br><span class="line">        final int count = getChildCount();</span><br><span class="line">        int width = r - l;</span><br><span class="line">        int height = b - t;</span><br><span class="line">        int paddingLeft = getPaddingLeft();</span><br><span class="line">        int paddingTop = getPaddingTop();</span><br><span class="line">        int paddingRight = getPaddingRight();</span><br><span class="line">        int paddingBottom = getPaddingBottom();</span><br><span class="line">        final int scrollX = getScrollX();</span><br><span class="line"></span><br><span class="line">        int decorCount = 0;</span><br><span class="line"></span><br><span class="line">        // First pass - decor views. We need to do this in two passes so that</span><br><span class="line">        // we have the proper offsets for non-decor views later.</span><br><span class="line">        for (int i = 0; i &lt; count; i++) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() != GONE) &#123;</span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">                int childLeft = 0;</span><br><span class="line">                int childTop = 0;</span><br><span class="line">                if (lp.isDecor) &#123;</span><br><span class="line">                    final int hgrav = lp.gravity &amp; Gravity.HORIZONTAL_GRAVITY_MASK;</span><br><span class="line">                    final int vgrav = lp.gravity &amp; Gravity.VERTICAL_GRAVITY_MASK;</span><br><span class="line">                    switch (hgrav) &#123;</span><br><span class="line">                        default:</span><br><span class="line">                            childLeft = paddingLeft;</span><br><span class="line">                            break;</span><br><span class="line">                        case Gravity.LEFT:</span><br><span class="line">                            childLeft = paddingLeft;</span><br><span class="line">                            paddingLeft += child.getMeasuredWidth();</span><br><span class="line">                            break;</span><br><span class="line">                        case Gravity.CENTER_HORIZONTAL:</span><br><span class="line">                            childLeft = Math.max((width - child.getMeasuredWidth()) / 2,</span><br><span class="line">                                    paddingLeft);</span><br><span class="line">                            break;</span><br><span class="line">                        case Gravity.RIGHT:</span><br><span class="line">                            childLeft = width - paddingRight - child.getMeasuredWidth();</span><br><span class="line">                            paddingRight += child.getMeasuredWidth();</span><br><span class="line">                            break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    switch (vgrav) &#123;</span><br><span class="line">                        default:</span><br><span class="line">                            childTop = paddingTop;</span><br><span class="line">                            break;</span><br><span class="line">                        case Gravity.TOP:</span><br><span class="line">                            childTop = paddingTop;</span><br><span class="line">                            paddingTop += child.getMeasuredHeight();</span><br><span class="line">                            break;</span><br><span class="line">                        case Gravity.CENTER_VERTICAL:</span><br><span class="line">                            childTop = Math.max((height - child.getMeasuredHeight()) / 2,</span><br><span class="line">                                    paddingTop);</span><br><span class="line">                            break;</span><br><span class="line">                        case Gravity.BOTTOM:</span><br><span class="line">                            childTop = height - paddingBottom - child.getMeasuredHeight();</span><br><span class="line">                            paddingBottom += child.getMeasuredHeight();</span><br><span class="line">                            break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    childLeft += scrollX;</span><br><span class="line">                    child.layout(childLeft, childTop,</span><br><span class="line">                            childLeft + child.getMeasuredWidth(),</span><br><span class="line">                            childTop + child.getMeasuredHeight());</span><br><span class="line">                    decorCount++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        final int childWidth = width - paddingLeft - paddingRight;</span><br><span class="line">        // Page views. Do this once we have the right padding offsets from above.</span><br><span class="line">        for (int i = 0; i &lt; count; i++) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() != GONE) &#123;</span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">                ItemInfo ii;</span><br><span class="line">                if (!lp.isDecor &amp;&amp; (ii = infoForChild(child)) != null) &#123;</span><br><span class="line">                    int loff = (int) (childWidth * ii.offset);</span><br><span class="line">                    int childLeft = paddingLeft + loff;</span><br><span class="line">                    int childTop = paddingTop;</span><br><span class="line">                    if (lp.needsMeasure) &#123;</span><br><span class="line">                        // This was added during layout and needs measurement.</span><br><span class="line">                        // Do it now that we know what we&apos;re working with.</span><br><span class="line">                        lp.needsMeasure = false;</span><br><span class="line">                        final int widthSpec = MeasureSpec.makeMeasureSpec(</span><br><span class="line">                                (int) (childWidth * lp.widthFactor),</span><br><span class="line">                                MeasureSpec.EXACTLY);</span><br><span class="line">                        final int heightSpec = MeasureSpec.makeMeasureSpec(</span><br><span class="line">                                (int) (height - paddingTop - paddingBottom),</span><br><span class="line">                                MeasureSpec.EXACTLY);</span><br><span class="line">                        child.measure(widthSpec, heightSpec);</span><br><span class="line">                    &#125;</span><br><span class="line">                    if (DEBUG) Log.v(TAG, &quot;Positioning #&quot; + i + &quot; &quot; + child + &quot; f=&quot; + ii.object</span><br><span class="line">                            + &quot;:&quot; + childLeft + &quot;,&quot; + childTop + &quot; &quot; + child.getMeasuredWidth()</span><br><span class="line">                            + &quot;x&quot; + child.getMeasuredHeight());</span><br><span class="line">                    child.layout(childLeft, childTop,</span><br><span class="line">                            childLeft + child.getMeasuredWidth(),</span><br><span class="line">                            childTop + child.getMeasuredHeight());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mTopPageBounds = paddingTop;</span><br><span class="line">        mBottomPageBounds = height - paddingBottom;</span><br><span class="line">        mDecorChildCount = decorCount;</span><br><span class="line"></span><br><span class="line">        if (mFirstLayout) &#123;</span><br><span class="line">            scrollToItem(mCurItem, false, 0, false);</span><br><span class="line">        &#125;</span><br><span class="line">        mFirstLayout = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void computeScroll() &#123;</span><br><span class="line">        mIsScrollStarted = true;</span><br><span class="line">        if (!mScroller.isFinished() &amp;&amp; mScroller.computeScrollOffset()) &#123;</span><br><span class="line">            int oldX = getScrollX();</span><br><span class="line">            int oldY = getScrollY();</span><br><span class="line">            int x = mScroller.getCurrX();</span><br><span class="line">            int y = mScroller.getCurrY();</span><br><span class="line"></span><br><span class="line">            if (oldX != x || oldY != y) &#123;</span><br><span class="line">                scrollTo(x, y);</span><br><span class="line">                if (!pageScrolled(x)) &#123;</span><br><span class="line">                    mScroller.abortAnimation();</span><br><span class="line">                    scrollTo(0, y);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // Keep on drawing until the animation has finished.</span><br><span class="line">            ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Done with scroll, clean up state.</span><br><span class="line">        completeScroll(true);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private boolean pageScrolled(int xpos) &#123;</span><br><span class="line">        if (mItems.size() == 0) &#123;</span><br><span class="line">            mCalledSuper = false;</span><br><span class="line">            onPageScrolled(0, 0, 0);</span><br><span class="line">            if (!mCalledSuper) &#123;</span><br><span class="line">                throw new IllegalStateException(</span><br><span class="line">                        &quot;onPageScrolled did not call superclass implementation&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        final ItemInfo ii = infoForCurrentScrollPosition();</span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line">        final int widthWithMargin = width + mPageMargin;</span><br><span class="line">        final float marginOffset = (float) mPageMargin / width;</span><br><span class="line">        final int currentPage = ii.position;</span><br><span class="line">        final float pageOffset = (((float) xpos / width) - ii.offset) /</span><br><span class="line">                (ii.widthFactor + marginOffset);</span><br><span class="line">        final int offsetPixels = (int) (pageOffset * widthWithMargin);</span><br><span class="line"></span><br><span class="line">        mCalledSuper = false;</span><br><span class="line">        onPageScrolled(currentPage, pageOffset, offsetPixels);</span><br><span class="line">        if (!mCalledSuper) &#123;</span><br><span class="line">            throw new IllegalStateException(</span><br><span class="line">                    &quot;onPageScrolled did not call superclass implementation&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * This method will be invoked when the current page is scrolled, either as part</span><br><span class="line">     * of a programmatically initiated smooth scroll or a user initiated touch scroll.</span><br><span class="line">     * If you override this method you must call through to the superclass implementation</span><br><span class="line">     * (e.g. super.onPageScrolled(position, offset, offsetPixels)) before onPageScrolled</span><br><span class="line">     * returns.</span><br><span class="line">     *</span><br><span class="line">     * @param position Position index of the first page currently being displayed.</span><br><span class="line">     *                 Page position+1 will be visible if positionOffset is nonzero.</span><br><span class="line">     * @param offset Value from [0, 1) indicating the offset from the page at position.</span><br><span class="line">     * @param offsetPixels Value in pixels indicating the offset from position.</span><br><span class="line">     */</span><br><span class="line">    @CallSuper</span><br><span class="line">    protected void onPageScrolled(int position, float offset, int offsetPixels) &#123;</span><br><span class="line">        // Offset any decor views if needed - keep them on-screen at all times.</span><br><span class="line">        if (mDecorChildCount &gt; 0) &#123;</span><br><span class="line">            final int scrollX = getScrollX();</span><br><span class="line">            int paddingLeft = getPaddingLeft();</span><br><span class="line">            int paddingRight = getPaddingRight();</span><br><span class="line">            final int width = getWidth();</span><br><span class="line">            final int childCount = getChildCount();</span><br><span class="line">            for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">                final View child = getChildAt(i);</span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line">                if (!lp.isDecor) continue;</span><br><span class="line"></span><br><span class="line">                final int hgrav = lp.gravity &amp; Gravity.HORIZONTAL_GRAVITY_MASK;</span><br><span class="line">                int childLeft = 0;</span><br><span class="line">                switch (hgrav) &#123;</span><br><span class="line">                    default:</span><br><span class="line">                        childLeft = paddingLeft;</span><br><span class="line">                        break;</span><br><span class="line">                    case Gravity.LEFT:</span><br><span class="line">                        childLeft = paddingLeft;</span><br><span class="line">                        paddingLeft += child.getWidth();</span><br><span class="line">                        break;</span><br><span class="line">                    case Gravity.CENTER_HORIZONTAL:</span><br><span class="line">                        childLeft = Math.max((width - child.getMeasuredWidth()) / 2,</span><br><span class="line">                                paddingLeft);</span><br><span class="line">                        break;</span><br><span class="line">                    case Gravity.RIGHT:</span><br><span class="line">                        childLeft = width - paddingRight - child.getMeasuredWidth();</span><br><span class="line">                        paddingRight += child.getMeasuredWidth();</span><br><span class="line">                        break;</span><br><span class="line">                &#125;</span><br><span class="line">                childLeft += scrollX;</span><br><span class="line"></span><br><span class="line">                final int childOffset = childLeft - child.getLeft();</span><br><span class="line">                if (childOffset != 0) &#123;</span><br><span class="line">                    child.offsetLeftAndRight(childOffset);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dispatchOnPageScrolled(position, offset, offsetPixels);</span><br><span class="line"></span><br><span class="line">        if (mPageTransformer != null) &#123;</span><br><span class="line">            final int scrollX = getScrollX();</span><br><span class="line">            final int childCount = getChildCount();</span><br><span class="line">            for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">                final View child = getChildAt(i);</span><br><span class="line">                final LayoutParams lp = (LayoutParams) child.getLayoutParams();</span><br><span class="line"></span><br><span class="line">                if (lp.isDecor) continue;</span><br><span class="line">                final float transformPos = (float) (child.getLeft() - scrollX) / getClientWidth();</span><br><span class="line">                mPageTransformer.transformPage(child, transformPos);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mCalledSuper = true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void dispatchOnPageScrolled(int position, float offset, int offsetPixels) &#123;</span><br><span class="line">        if (mOnPageChangeListener != null) &#123;</span><br><span class="line">            mOnPageChangeListener.onPageScrolled(position, offset, offsetPixels);</span><br><span class="line">        &#125;</span><br><span class="line">        if (mOnPageChangeListeners != null) &#123;</span><br><span class="line">            for (int i = 0, z = mOnPageChangeListeners.size(); i &lt; z; i++) &#123;</span><br><span class="line">                OnPageChangeListener listener = mOnPageChangeListeners.get(i);</span><br><span class="line">                if (listener != null) &#123;</span><br><span class="line">                    listener.onPageScrolled(position, offset, offsetPixels);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (mInternalPageChangeListener != null) &#123;</span><br><span class="line">            mInternalPageChangeListener.onPageScrolled(position, offset, offsetPixels);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void dispatchOnPageSelected(int position) &#123;</span><br><span class="line">        if (mOnPageChangeListener != null) &#123;</span><br><span class="line">            mOnPageChangeListener.onPageSelected(position);</span><br><span class="line">        &#125;</span><br><span class="line">        if (mOnPageChangeListeners != null) &#123;</span><br><span class="line">            for (int i = 0, z = mOnPageChangeListeners.size(); i &lt; z; i++) &#123;</span><br><span class="line">                OnPageChangeListener listener = mOnPageChangeListeners.get(i);</span><br><span class="line">                if (listener != null) &#123;</span><br><span class="line">                    listener.onPageSelected(position);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (mInternalPageChangeListener != null) &#123;</span><br><span class="line">            mInternalPageChangeListener.onPageSelected(position);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void dispatchOnScrollStateChanged(int state) &#123;</span><br><span class="line">        if (mOnPageChangeListener != null) &#123;</span><br><span class="line">            mOnPageChangeListener.onPageScrollStateChanged(state);</span><br><span class="line">        &#125;</span><br><span class="line">        if (mOnPageChangeListeners != null) &#123;</span><br><span class="line">            for (int i = 0, z = mOnPageChangeListeners.size(); i &lt; z; i++) &#123;</span><br><span class="line">                OnPageChangeListener listener = mOnPageChangeListeners.get(i);</span><br><span class="line">                if (listener != null) &#123;</span><br><span class="line">                    listener.onPageScrollStateChanged(state);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (mInternalPageChangeListener != null) &#123;</span><br><span class="line">            mInternalPageChangeListener.onPageScrollStateChanged(state);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void completeScroll(boolean postEvents) &#123;</span><br><span class="line">        boolean needPopulate = mScrollState == SCROLL_STATE_SETTLING;</span><br><span class="line">        if (needPopulate) &#123;</span><br><span class="line">            // Done with scroll, no longer want to cache view drawing.</span><br><span class="line">            setScrollingCacheEnabled(false);</span><br><span class="line">            boolean wasScrolling = !mScroller.isFinished();</span><br><span class="line">            if (wasScrolling) &#123;</span><br><span class="line">                mScroller.abortAnimation();</span><br><span class="line">                int oldX = getScrollX();</span><br><span class="line">                int oldY = getScrollY();</span><br><span class="line">                int x = mScroller.getCurrX();</span><br><span class="line">                int y = mScroller.getCurrY();</span><br><span class="line">                if (oldX != x || oldY != y) &#123;</span><br><span class="line">                    scrollTo(x, y);</span><br><span class="line">                    if (x != oldX) &#123;</span><br><span class="line">                        pageScrolled(x);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        mPopulatePending = false;</span><br><span class="line">        for (int i=0; i&lt;mItems.size(); i++) &#123;</span><br><span class="line">            ItemInfo ii = mItems.get(i);</span><br><span class="line">            if (ii.scrolling) &#123;</span><br><span class="line">                needPopulate = true;</span><br><span class="line">                ii.scrolling = false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (needPopulate) &#123;</span><br><span class="line">            if (postEvents) &#123;</span><br><span class="line">                ViewCompat.postOnAnimation(this, mEndScrollRunnable);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                mEndScrollRunnable.run();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private boolean isGutterDrag(float x, float dx) &#123;</span><br><span class="line">        return (x &lt; mGutterSize &amp;&amp; dx &gt; 0) || (x &gt; getWidth() - mGutterSize &amp;&amp; dx &lt; 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void enableLayers(boolean enable) &#123;</span><br><span class="line">        final int childCount = getChildCount();</span><br><span class="line">        for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">            final int layerType = enable ?</span><br><span class="line">                    ViewCompat.LAYER_TYPE_HARDWARE : ViewCompat.LAYER_TYPE_NONE;</span><br><span class="line">            ViewCompat.setLayerType(getChildAt(i), layerType, null);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onInterceptTouchEvent(MotionEvent ev) &#123;</span><br><span class="line">        /*</span><br><span class="line">         * This method JUST determines whether we want to intercept the motion.</span><br><span class="line">         * If we return true, onMotionEvent will be called and we do the actual</span><br><span class="line">         * scrolling there.</span><br><span class="line">         */</span><br><span class="line"></span><br><span class="line">        final int action = ev.getAction() &amp; MotionEventCompat.ACTION_MASK;</span><br><span class="line"></span><br><span class="line">        // Always take care of the touch gesture being complete.</span><br><span class="line">        if (action == MotionEvent.ACTION_CANCEL || action == MotionEvent.ACTION_UP) &#123;</span><br><span class="line">            // Release the drag.</span><br><span class="line">            if (DEBUG) Log.v(TAG, &quot;Intercept done!&quot;);</span><br><span class="line">            resetTouch();</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Nothing more to do here if we have decided whether or not we</span><br><span class="line">        // are dragging.</span><br><span class="line">        if (action != MotionEvent.ACTION_DOWN) &#123;</span><br><span class="line">            if (mIsBeingDragged) &#123;</span><br><span class="line">                if (DEBUG) Log.v(TAG, &quot;Intercept returning true!&quot;);</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">            if (mIsUnableToDrag) &#123;</span><br><span class="line">                if (DEBUG) Log.v(TAG, &quot;Intercept returning false!&quot;);</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        switch (action) &#123;</span><br><span class="line">            case MotionEvent.ACTION_MOVE: &#123;</span><br><span class="line">                /*</span><br><span class="line">                 * mIsBeingDragged == false, otherwise the shortcut would have caught it. Check</span><br><span class="line">                 * whether the user has moved far enough from his original down touch.</span><br><span class="line">                 */</span><br><span class="line"></span><br><span class="line">                /*</span><br><span class="line">                * Locally do absolute value. mLastMotionY is set to the y value</span><br><span class="line">                * of the down event.</span><br><span class="line">                */</span><br><span class="line">                final int activePointerId = mActivePointerId;</span><br><span class="line">                if (activePointerId == INVALID_POINTER) &#123;</span><br><span class="line">                    // If we don&apos;t have a valid id, the touch down wasn&apos;t on content.</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                final int pointerIndex = MotionEventCompat.findPointerIndex(ev, activePointerId);</span><br><span class="line">                final float x = MotionEventCompat.getX(ev, pointerIndex);</span><br><span class="line">                final float dx = x - mLastMotionX;</span><br><span class="line">                final float xDiff = Math.abs(dx);</span><br><span class="line">                final float y = MotionEventCompat.getY(ev, pointerIndex);</span><br><span class="line">                final float yDiff = Math.abs(y - mInitialMotionY);</span><br><span class="line">                if (DEBUG) Log.v(TAG, &quot;Moved x to &quot; + x + &quot;,&quot; + y + &quot; diff=&quot; + xDiff + &quot;,&quot; + yDiff);</span><br><span class="line"></span><br><span class="line">                if (dx != 0 &amp;&amp; !isGutterDrag(mLastMotionX, dx) &amp;&amp;</span><br><span class="line">                        canScroll(this, false, (int) dx, (int) x, (int) y)) &#123;</span><br><span class="line">                    // Nested view has scrollable area under this point. Let it be handled there.</span><br><span class="line">                    mLastMotionX = x;</span><br><span class="line">                    mLastMotionY = y;</span><br><span class="line">                    mIsUnableToDrag = true;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125;</span><br><span class="line">                if (xDiff &gt; mTouchSlop &amp;&amp; xDiff * 0.5f &gt; yDiff) &#123;</span><br><span class="line">                    if (DEBUG) Log.v(TAG, &quot;Starting drag!&quot;);</span><br><span class="line">                    mIsBeingDragged = true;</span><br><span class="line">                    requestParentDisallowInterceptTouchEvent(true);</span><br><span class="line">                    setScrollState(SCROLL_STATE_DRAGGING);</span><br><span class="line">                    mLastMotionX = dx &gt; 0 ? mInitialMotionX + mTouchSlop :</span><br><span class="line">                            mInitialMotionX - mTouchSlop;</span><br><span class="line">                    mLastMotionY = y;</span><br><span class="line">                    setScrollingCacheEnabled(true);</span><br><span class="line">                &#125; else if (yDiff &gt; mTouchSlop) &#123;</span><br><span class="line">                    // The finger has moved enough in the vertical</span><br><span class="line">                    // direction to be counted as a drag...  abort</span><br><span class="line">                    // any attempt to drag horizontally, to work correctly</span><br><span class="line">                    // with children that have scrolling containers.</span><br><span class="line">                    if (DEBUG) Log.v(TAG, &quot;Starting unable to drag!&quot;);</span><br><span class="line">                    mIsUnableToDrag = true;</span><br><span class="line">                &#125;</span><br><span class="line">                if (mIsBeingDragged) &#123;</span><br><span class="line">                    // Scroll to follow the motion event</span><br><span class="line">                    if (performDrag(x)) &#123;</span><br><span class="line">                        ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            case MotionEvent.ACTION_DOWN: &#123;</span><br><span class="line">                /*</span><br><span class="line">                 * Remember location of down touch.</span><br><span class="line">                 * ACTION_DOWN always refers to pointer index 0.</span><br><span class="line">                 */</span><br><span class="line">                mLastMotionX = mInitialMotionX = ev.getX();</span><br><span class="line">                mLastMotionY = mInitialMotionY = ev.getY();</span><br><span class="line">                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);</span><br><span class="line">                mIsUnableToDrag = false;</span><br><span class="line"></span><br><span class="line">                mIsScrollStarted = true;</span><br><span class="line">                mScroller.computeScrollOffset();</span><br><span class="line">                if (mScrollState == SCROLL_STATE_SETTLING &amp;&amp;</span><br><span class="line">                        Math.abs(mScroller.getFinalX() - mScroller.getCurrX()) &gt; mCloseEnough) &#123;</span><br><span class="line">                    // Let the user &apos;catch&apos; the pager as it animates.</span><br><span class="line">                    mScroller.abortAnimation();</span><br><span class="line">                    mPopulatePending = false;</span><br><span class="line">                    populate();</span><br><span class="line">                    mIsBeingDragged = true;</span><br><span class="line">                    requestParentDisallowInterceptTouchEvent(true);</span><br><span class="line">                    setScrollState(SCROLL_STATE_DRAGGING);</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    completeScroll(false);</span><br><span class="line">                    mIsBeingDragged = false;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (DEBUG) Log.v(TAG, &quot;Down at &quot; + mLastMotionX + &quot;,&quot; + mLastMotionY</span><br><span class="line">                        + &quot; mIsBeingDragged=&quot; + mIsBeingDragged</span><br><span class="line">                        + &quot;mIsUnableToDrag=&quot; + mIsUnableToDrag);</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            case MotionEventCompat.ACTION_POINTER_UP:</span><br><span class="line">                onSecondaryPointerUp(ev);</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mVelocityTracker == null) &#123;</span><br><span class="line">            mVelocityTracker = VelocityTracker.obtain();</span><br><span class="line">        &#125;</span><br><span class="line">        mVelocityTracker.addMovement(ev);</span><br><span class="line"></span><br><span class="line">        /*</span><br><span class="line">         * The only time we want to intercept motion events is if we are in the</span><br><span class="line">         * drag mode.</span><br><span class="line">         */</span><br><span class="line">        return mIsBeingDragged;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onTouchEvent(MotionEvent ev) &#123;</span><br><span class="line">        if (mFakeDragging) &#123;</span><br><span class="line">            // A fake drag is in progress already, ignore this real one</span><br><span class="line">            // but still eat the touch events.</span><br><span class="line">            // (It is likely that the user is multi-touching the screen.)</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (ev.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; ev.getEdgeFlags() != 0) &#123;</span><br><span class="line">            // Don&apos;t handle edge touches immediately -- they may actually belong to one of our</span><br><span class="line">            // descendants.</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mAdapter == null || mAdapter.getCount() == 0) &#123;</span><br><span class="line">            // Nothing to present or scroll; nothing to touch.</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mVelocityTracker == null) &#123;</span><br><span class="line">            mVelocityTracker = VelocityTracker.obtain();</span><br><span class="line">        &#125;</span><br><span class="line">        mVelocityTracker.addMovement(ev);</span><br><span class="line"></span><br><span class="line">        final int action = ev.getAction();</span><br><span class="line">        boolean needsInvalidate = false;</span><br><span class="line"></span><br><span class="line">        switch (action &amp; MotionEventCompat.ACTION_MASK) &#123;</span><br><span class="line">            case MotionEvent.ACTION_DOWN: &#123;</span><br><span class="line">                mScroller.abortAnimation();</span><br><span class="line">                mPopulatePending = false;</span><br><span class="line">                populate();</span><br><span class="line"></span><br><span class="line">                // Remember where the motion event started</span><br><span class="line">                mLastMotionX = mInitialMotionX = ev.getX();</span><br><span class="line">                mLastMotionY = mInitialMotionY = ev.getY();</span><br><span class="line">                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">            case MotionEvent.ACTION_MOVE:</span><br><span class="line">                if (!mIsBeingDragged) &#123;</span><br><span class="line">                    final int pointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);</span><br><span class="line">                    if (pointerIndex == -1) &#123;</span><br><span class="line">                        // A child has consumed some touch events and put us into an inconsistent state.</span><br><span class="line">                        needsInvalidate = resetTouch();</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                    final float x = MotionEventCompat.getX(ev, pointerIndex);</span><br><span class="line">                    final float xDiff = Math.abs(x - mLastMotionX);</span><br><span class="line">                    final float y = MotionEventCompat.getY(ev, pointerIndex);</span><br><span class="line">                    final float yDiff = Math.abs(y - mLastMotionY);</span><br><span class="line">                    if (DEBUG) Log.v(TAG, &quot;Moved x to &quot; + x + &quot;,&quot; + y + &quot; diff=&quot; + xDiff + &quot;,&quot; + yDiff);</span><br><span class="line">                    if (xDiff &gt; mTouchSlop &amp;&amp; xDiff &gt; yDiff) &#123;</span><br><span class="line">                        if (DEBUG) Log.v(TAG, &quot;Starting drag!&quot;);</span><br><span class="line">                        mIsBeingDragged = true;</span><br><span class="line">                        requestParentDisallowInterceptTouchEvent(true);</span><br><span class="line">                        mLastMotionX = x - mInitialMotionX &gt; 0 ? mInitialMotionX + mTouchSlop :</span><br><span class="line">                                mInitialMotionX - mTouchSlop;</span><br><span class="line">                        mLastMotionY = y;</span><br><span class="line">                        setScrollState(SCROLL_STATE_DRAGGING);</span><br><span class="line">                        setScrollingCacheEnabled(true);</span><br><span class="line"></span><br><span class="line">                        // Disallow Parent Intercept, just in case</span><br><span class="line">                        ViewParent parent = getParent();</span><br><span class="line">                        if (parent != null) &#123;</span><br><span class="line">                            parent.requestDisallowInterceptTouchEvent(true);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                // Not else! Note that mIsBeingDragged can be set above.</span><br><span class="line">                if (mIsBeingDragged) &#123;</span><br><span class="line">                    // Scroll to follow the motion event</span><br><span class="line">                    final int activePointerIndex = MotionEventCompat.findPointerIndex(</span><br><span class="line">                            ev, mActivePointerId);</span><br><span class="line">                    final float x = MotionEventCompat.getX(ev, activePointerIndex);</span><br><span class="line">                    needsInvalidate |= performDrag(x);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case MotionEvent.ACTION_UP:</span><br><span class="line">                if (mIsBeingDragged) &#123;</span><br><span class="line">                    final VelocityTracker velocityTracker = mVelocityTracker;</span><br><span class="line">                    velocityTracker.computeCurrentVelocity(1000, mMaximumVelocity);</span><br><span class="line">                    int initialVelocity = (int) VelocityTrackerCompat.getXVelocity(</span><br><span class="line">                            velocityTracker, mActivePointerId);</span><br><span class="line">                    mPopulatePending = true;</span><br><span class="line">                    final int width = getClientWidth();</span><br><span class="line">                    final int scrollX = getScrollX();</span><br><span class="line">                    final ItemInfo ii = infoForCurrentScrollPosition();</span><br><span class="line">                    final int currentPage = ii.position;</span><br><span class="line">                    final float pageOffset = (((float) scrollX / width) - ii.offset) / ii.widthFactor;</span><br><span class="line">                    final int activePointerIndex =</span><br><span class="line">                            MotionEventCompat.findPointerIndex(ev, mActivePointerId);</span><br><span class="line">                    final float x = MotionEventCompat.getX(ev, activePointerIndex);</span><br><span class="line">                    final int totalDelta = (int) (x - mInitialMotionX);</span><br><span class="line">                    int nextPage = determineTargetPage(currentPage, pageOffset, initialVelocity,</span><br><span class="line">                            totalDelta);</span><br><span class="line">                    setCurrentItemInternal(nextPage, true, true, initialVelocity);</span><br><span class="line"></span><br><span class="line">                    needsInvalidate = resetTouch();</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case MotionEvent.ACTION_CANCEL:</span><br><span class="line">                if (mIsBeingDragged) &#123;</span><br><span class="line">                    scrollToItem(mCurItem, true, 0, false);</span><br><span class="line">                    needsInvalidate = resetTouch();</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case MotionEventCompat.ACTION_POINTER_DOWN: &#123;</span><br><span class="line">                final int index = MotionEventCompat.getActionIndex(ev);</span><br><span class="line">                final float x = MotionEventCompat.getX(ev, index);</span><br><span class="line">                mLastMotionX = x;</span><br><span class="line">                mActivePointerId = MotionEventCompat.getPointerId(ev, index);</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">            case MotionEventCompat.ACTION_POINTER_UP:</span><br><span class="line">                onSecondaryPointerUp(ev);</span><br><span class="line">                mLastMotionX = MotionEventCompat.getX(ev,</span><br><span class="line">                        MotionEventCompat.findPointerIndex(ev, mActivePointerId));</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        if (needsInvalidate) &#123;</span><br><span class="line">            ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private boolean resetTouch() &#123;</span><br><span class="line">        boolean needsInvalidate;</span><br><span class="line">        mActivePointerId = INVALID_POINTER;</span><br><span class="line">        endDrag();</span><br><span class="line">        needsInvalidate = mLeftEdge.onRelease() | mRightEdge.onRelease();</span><br><span class="line">        return needsInvalidate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void requestParentDisallowInterceptTouchEvent(boolean disallowIntercept) &#123;</span><br><span class="line">        final ViewParent parent = getParent();</span><br><span class="line">        if (parent != null) &#123;</span><br><span class="line">            parent.requestDisallowInterceptTouchEvent(disallowIntercept);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private boolean performDrag(float x) &#123;</span><br><span class="line">        boolean needsInvalidate = false;</span><br><span class="line"></span><br><span class="line">        final float deltaX = mLastMotionX - x;</span><br><span class="line">        mLastMotionX = x;</span><br><span class="line"></span><br><span class="line">        float oldScrollX = getScrollX();</span><br><span class="line">        float scrollX = oldScrollX + deltaX;</span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line"></span><br><span class="line">        float leftBound = width * mFirstOffset;</span><br><span class="line">        float rightBound = width * mLastOffset;</span><br><span class="line">        boolean leftAbsolute = true;</span><br><span class="line">        boolean rightAbsolute = true;</span><br><span class="line"></span><br><span class="line">        final ItemInfo firstItem = mItems.get(0);</span><br><span class="line">        final ItemInfo lastItem = mItems.get(mItems.size() - 1);</span><br><span class="line">        if (firstItem.position != 0) &#123;</span><br><span class="line">            leftAbsolute = false;</span><br><span class="line">            leftBound = firstItem.offset * width;</span><br><span class="line">        &#125;</span><br><span class="line">        if (lastItem.position != mAdapter.getCount() - 1) &#123;</span><br><span class="line">            rightAbsolute = false;</span><br><span class="line">            rightBound = lastItem.offset * width;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (scrollX &lt; leftBound) &#123;</span><br><span class="line">            if (leftAbsolute) &#123;</span><br><span class="line">                float over = leftBound - scrollX;</span><br><span class="line">                needsInvalidate = mLeftEdge.onPull(Math.abs(over) / width);</span><br><span class="line">            &#125;</span><br><span class="line">            scrollX = leftBound;</span><br><span class="line">        &#125; else if (scrollX &gt; rightBound) &#123;</span><br><span class="line">            if (rightAbsolute) &#123;</span><br><span class="line">                float over = scrollX - rightBound;</span><br><span class="line">                needsInvalidate = mRightEdge.onPull(Math.abs(over) / width);</span><br><span class="line">            &#125;</span><br><span class="line">            scrollX = rightBound;</span><br><span class="line">        &#125;</span><br><span class="line">        // Don&apos;t lose the rounded component</span><br><span class="line">        mLastMotionX += scrollX - (int) scrollX;</span><br><span class="line">        scrollTo((int) scrollX, getScrollY());</span><br><span class="line">        pageScrolled((int) scrollX);</span><br><span class="line"></span><br><span class="line">        return needsInvalidate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return Info about the page at the current scroll position.</span><br><span class="line">     *         This can be synthetic for a missing middle page; the &apos;object&apos; field can be null.</span><br><span class="line">     */</span><br><span class="line">    private ItemInfo infoForCurrentScrollPosition() &#123;</span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line">        final float scrollOffset = width &gt; 0 ? (float) getScrollX() / width : 0;</span><br><span class="line">        final float marginOffset = width &gt; 0 ? (float) mPageMargin / width : 0;</span><br><span class="line">        int lastPos = -1;</span><br><span class="line">        float lastOffset = 0.f;</span><br><span class="line">        float lastWidth = 0.f;</span><br><span class="line">        boolean first = true;</span><br><span class="line"></span><br><span class="line">        ItemInfo lastItem = null;</span><br><span class="line">        for (int i = 0; i &lt; mItems.size(); i++) &#123;</span><br><span class="line">            ItemInfo ii = mItems.get(i);</span><br><span class="line">            float offset;</span><br><span class="line">            if (!first &amp;&amp; ii.position != lastPos + 1) &#123;</span><br><span class="line">                // Create a synthetic item for a missing page.</span><br><span class="line">                ii = mTempItem;</span><br><span class="line">                ii.offset = lastOffset + lastWidth + marginOffset;</span><br><span class="line">                ii.position = lastPos + 1;</span><br><span class="line">                ii.widthFactor = mAdapter.getPageWidth(ii.position);</span><br><span class="line">                i--;</span><br><span class="line">            &#125;</span><br><span class="line">            offset = ii.offset;</span><br><span class="line"></span><br><span class="line">            final float leftBound = offset;</span><br><span class="line">            final float rightBound = offset + ii.widthFactor + marginOffset;</span><br><span class="line">            if (first || scrollOffset &gt;= leftBound) &#123;</span><br><span class="line">                if (scrollOffset &lt; rightBound || i == mItems.size() - 1) &#123;</span><br><span class="line">                    return ii;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return lastItem;</span><br><span class="line">            &#125;</span><br><span class="line">            first = false;</span><br><span class="line">            lastPos = ii.position;</span><br><span class="line">            lastOffset = offset;</span><br><span class="line">            lastWidth = ii.widthFactor;</span><br><span class="line">            lastItem = ii;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return lastItem;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int determineTargetPage(int currentPage, float pageOffset, int velocity, int deltaX) &#123;</span><br><span class="line">        int targetPage;</span><br><span class="line">        if (Math.abs(deltaX) &gt; mFlingDistance &amp;&amp; Math.abs(velocity) &gt; mMinimumVelocity) &#123;</span><br><span class="line">            targetPage = velocity &gt; 0 ? currentPage : currentPage + 1;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            final float truncator = currentPage &gt;= mCurItem ? 0.4f : 0.6f;</span><br><span class="line">            targetPage = (int) (currentPage + pageOffset + truncator);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mItems.size() &gt; 0) &#123;</span><br><span class="line">            final ItemInfo firstItem = mItems.get(0);</span><br><span class="line">            final ItemInfo lastItem = mItems.get(mItems.size() - 1);</span><br><span class="line"></span><br><span class="line">            // Only let the user target pages we have items for</span><br><span class="line">            targetPage = Math.max(firstItem.position, Math.min(targetPage, lastItem.position));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return targetPage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void draw(Canvas canvas) &#123;</span><br><span class="line">        super.draw(canvas);</span><br><span class="line">        boolean needsInvalidate = false;</span><br><span class="line"></span><br><span class="line">        final int overScrollMode = ViewCompat.getOverScrollMode(this);</span><br><span class="line">        if (overScrollMode == ViewCompat.OVER_SCROLL_ALWAYS ||</span><br><span class="line">                (overScrollMode == ViewCompat.OVER_SCROLL_IF_CONTENT_SCROLLS &amp;&amp;</span><br><span class="line">                        mAdapter != null &amp;&amp; mAdapter.getCount() &gt; 1)) &#123;</span><br><span class="line">            if (!mLeftEdge.isFinished()) &#123;</span><br><span class="line">                final int restoreCount = canvas.save();</span><br><span class="line">                final int height = getHeight() - getPaddingTop() - getPaddingBottom();</span><br><span class="line">                final int width = getWidth();</span><br><span class="line"></span><br><span class="line">                canvas.rotate(270);</span><br><span class="line">                canvas.translate(-height + getPaddingTop(), mFirstOffset * width);</span><br><span class="line">                mLeftEdge.setSize(height, width);</span><br><span class="line">                needsInvalidate |= mLeftEdge.draw(canvas);</span><br><span class="line">                canvas.restoreToCount(restoreCount);</span><br><span class="line">            &#125;</span><br><span class="line">            if (!mRightEdge.isFinished()) &#123;</span><br><span class="line">                final int restoreCount = canvas.save();</span><br><span class="line">                final int width = getWidth();</span><br><span class="line">                final int height = getHeight() - getPaddingTop() - getPaddingBottom();</span><br><span class="line"></span><br><span class="line">                canvas.rotate(90);</span><br><span class="line">                canvas.translate(-getPaddingTop(), -(mLastOffset + 1) * width);</span><br><span class="line">                mRightEdge.setSize(height, width);</span><br><span class="line">                needsInvalidate |= mRightEdge.draw(canvas);</span><br><span class="line">                canvas.restoreToCount(restoreCount);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mLeftEdge.finish();</span><br><span class="line">            mRightEdge.finish();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (needsInvalidate) &#123;</span><br><span class="line">            // Keep animating</span><br><span class="line">            ViewCompat.postInvalidateOnAnimation(this);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">        // Draw the margin drawable between pages if needed.</span><br><span class="line">        if (mPageMargin &gt; 0 &amp;&amp; mMarginDrawable != null &amp;&amp; mItems.size() &gt; 0 &amp;&amp; mAdapter != null) &#123;</span><br><span class="line">            final int scrollX = getScrollX();</span><br><span class="line">            final int width = getWidth();</span><br><span class="line"></span><br><span class="line">            final float marginOffset = (float) mPageMargin / width;</span><br><span class="line">            int itemIndex = 0;</span><br><span class="line">            ItemInfo ii = mItems.get(0);</span><br><span class="line">            float offset = ii.offset;</span><br><span class="line">            final int itemCount = mItems.size();</span><br><span class="line">            final int firstPos = ii.position;</span><br><span class="line">            final int lastPos = mItems.get(itemCount - 1).position;</span><br><span class="line">            for (int pos = firstPos; pos &lt; lastPos; pos++) &#123;</span><br><span class="line">                while (pos &gt; ii.position &amp;&amp; itemIndex &lt; itemCount) &#123;</span><br><span class="line">                    ii = mItems.get(++itemIndex);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                float drawAt;</span><br><span class="line">                if (pos == ii.position) &#123;</span><br><span class="line">                    drawAt = (ii.offset + ii.widthFactor) * width;</span><br><span class="line">                    offset = ii.offset + ii.widthFactor + marginOffset;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    float widthFactor = mAdapter.getPageWidth(pos);</span><br><span class="line">                    drawAt = (offset + widthFactor) * width;</span><br><span class="line">                    offset += widthFactor + marginOffset;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (drawAt + mPageMargin &gt; scrollX) &#123;</span><br><span class="line">                    mMarginDrawable.setBounds((int) drawAt, mTopPageBounds,</span><br><span class="line">                            (int) (drawAt + mPageMargin + 0.5f), mBottomPageBounds);</span><br><span class="line">                    mMarginDrawable.draw(canvas);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (drawAt &gt; scrollX + width) &#123;</span><br><span class="line">                    break; // No more visible, no sense in continuing</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Start a fake drag of the pager.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;A fake drag can be useful if you want to synchronize the motion of the ViewPager</span><br><span class="line">     * with the touch scrolling of another view, while still letting the ViewPager</span><br><span class="line">     * control the snapping motion and fling behavior. (e.g. parallax-scrolling tabs.)</span><br><span class="line">     * Call &#123;@link #fakeDragBy(float)&#125; to simulate the actual drag motion. Call</span><br><span class="line">     * &#123;@link #endFakeDrag()&#125; to complete the fake drag and fling as necessary.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;During a fake drag the ViewPager will ignore all touch events. If a real drag</span><br><span class="line">     * is already in progress, this method will return false.</span><br><span class="line">     *</span><br><span class="line">     * @return true if the fake drag began successfully, false if it could not be started.</span><br><span class="line">     *</span><br><span class="line">     * @see #fakeDragBy(float)</span><br><span class="line">     * @see #endFakeDrag()</span><br><span class="line">     */</span><br><span class="line">    public boolean beginFakeDrag() &#123;</span><br><span class="line">        if (mIsBeingDragged) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        mFakeDragging = true;</span><br><span class="line">        setScrollState(SCROLL_STATE_DRAGGING);</span><br><span class="line">        mInitialMotionX = mLastMotionX = 0;</span><br><span class="line">        if (mVelocityTracker == null) &#123;</span><br><span class="line">            mVelocityTracker = VelocityTracker.obtain();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mVelocityTracker.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        final long time = SystemClock.uptimeMillis();</span><br><span class="line">        final MotionEvent ev = MotionEvent.obtain(time, time, MotionEvent.ACTION_DOWN, 0, 0, 0);</span><br><span class="line">        mVelocityTracker.addMovement(ev);</span><br><span class="line">        ev.recycle();</span><br><span class="line">        mFakeDragBeginTime = time;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * End a fake drag of the pager.</span><br><span class="line">     *</span><br><span class="line">     * @see #beginFakeDrag()</span><br><span class="line">     * @see #fakeDragBy(float)</span><br><span class="line">     */</span><br><span class="line">    public void endFakeDrag() &#123;</span><br><span class="line">        if (!mFakeDragging) &#123;</span><br><span class="line">            throw new IllegalStateException(&quot;No fake drag in progress. Call beginFakeDrag first.&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mAdapter != null) &#123;</span><br><span class="line">            final VelocityTracker velocityTracker = mVelocityTracker;</span><br><span class="line">            velocityTracker.computeCurrentVelocity(1000, mMaximumVelocity);</span><br><span class="line">            int initialVelocity = (int) VelocityTrackerCompat.getXVelocity(</span><br><span class="line">                    velocityTracker, mActivePointerId);</span><br><span class="line">            mPopulatePending = true;</span><br><span class="line">            final int width = getClientWidth();</span><br><span class="line">            final int scrollX = getScrollX();</span><br><span class="line">            final ItemInfo ii = infoForCurrentScrollPosition();</span><br><span class="line">            final int currentPage = ii.position;</span><br><span class="line">            final float pageOffset = (((float) scrollX / width) - ii.offset) / ii.widthFactor;</span><br><span class="line">            final int totalDelta = (int) (mLastMotionX - mInitialMotionX);</span><br><span class="line">            int nextPage = determineTargetPage(currentPage, pageOffset, initialVelocity,</span><br><span class="line">                    totalDelta);</span><br><span class="line">            setCurrentItemInternal(nextPage, true, true, initialVelocity);</span><br><span class="line">        &#125;</span><br><span class="line">        endDrag();</span><br><span class="line"></span><br><span class="line">        mFakeDragging = false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Fake drag by an offset in pixels. You must have called &#123;@link #beginFakeDrag()&#125; first.</span><br><span class="line">     *</span><br><span class="line">     * @param xOffset Offset in pixels to drag by.</span><br><span class="line">     * @see #beginFakeDrag()</span><br><span class="line">     * @see #endFakeDrag()</span><br><span class="line">     */</span><br><span class="line">    public void fakeDragBy(float xOffset) &#123;</span><br><span class="line">        if (!mFakeDragging) &#123;</span><br><span class="line">            throw new IllegalStateException(&quot;No fake drag in progress. Call beginFakeDrag first.&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (mAdapter == null) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        mLastMotionX += xOffset;</span><br><span class="line"></span><br><span class="line">        float oldScrollX = getScrollX();</span><br><span class="line">        float scrollX = oldScrollX - xOffset;</span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line"></span><br><span class="line">        float leftBound = width * mFirstOffset;</span><br><span class="line">        float rightBound = width * mLastOffset;</span><br><span class="line"></span><br><span class="line">        final ItemInfo firstItem = mItems.get(0);</span><br><span class="line">        final ItemInfo lastItem = mItems.get(mItems.size() - 1);</span><br><span class="line">        if (firstItem.position != 0) &#123;</span><br><span class="line">            leftBound = firstItem.offset * width;</span><br><span class="line">        &#125;</span><br><span class="line">        if (lastItem.position != mAdapter.getCount() - 1) &#123;</span><br><span class="line">            rightBound = lastItem.offset * width;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (scrollX &lt; leftBound) &#123;</span><br><span class="line">            scrollX = leftBound;</span><br><span class="line">        &#125; else if (scrollX &gt; rightBound) &#123;</span><br><span class="line">            scrollX = rightBound;</span><br><span class="line">        &#125;</span><br><span class="line">        // Don&apos;t lose the rounded component</span><br><span class="line">        mLastMotionX += scrollX - (int) scrollX;</span><br><span class="line">        scrollTo((int) scrollX, getScrollY());</span><br><span class="line">        pageScrolled((int) scrollX);</span><br><span class="line"></span><br><span class="line">        // Synthesize an event for the VelocityTracker.</span><br><span class="line">        final long time = SystemClock.uptimeMillis();</span><br><span class="line">        final MotionEvent ev = MotionEvent.obtain(mFakeDragBeginTime, time, MotionEvent.ACTION_MOVE,</span><br><span class="line">                mLastMotionX, 0, 0);</span><br><span class="line">        mVelocityTracker.addMovement(ev);</span><br><span class="line">        ev.recycle();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns true if a fake drag is in progress.</span><br><span class="line">     *</span><br><span class="line">     * @return true if currently in a fake drag, false otherwise.</span><br><span class="line">     *</span><br><span class="line">     * @see #beginFakeDrag()</span><br><span class="line">     * @see #fakeDragBy(float)</span><br><span class="line">     * @see #endFakeDrag()</span><br><span class="line">     */</span><br><span class="line">    public boolean isFakeDragging() &#123;</span><br><span class="line">        return mFakeDragging;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void onSecondaryPointerUp(MotionEvent ev) &#123;</span><br><span class="line">        final int pointerIndex = MotionEventCompat.getActionIndex(ev);</span><br><span class="line">        final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);</span><br><span class="line">        if (pointerId == mActivePointerId) &#123;</span><br><span class="line">            // This was our active pointer going up. Choose a new</span><br><span class="line">            // active pointer and adjust accordingly.</span><br><span class="line">            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;</span><br><span class="line">            mLastMotionX = MotionEventCompat.getX(ev, newPointerIndex);</span><br><span class="line">            mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);</span><br><span class="line">            if (mVelocityTracker != null) &#123;</span><br><span class="line">                mVelocityTracker.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void endDrag() &#123;</span><br><span class="line">        mIsBeingDragged = false;</span><br><span class="line">        mIsUnableToDrag = false;</span><br><span class="line"></span><br><span class="line">        if (mVelocityTracker != null) &#123;</span><br><span class="line">            mVelocityTracker.recycle();</span><br><span class="line">            mVelocityTracker = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void setScrollingCacheEnabled(boolean enabled) &#123;</span><br><span class="line">        if (mScrollingCacheEnabled != enabled) &#123;</span><br><span class="line">            mScrollingCacheEnabled = enabled;</span><br><span class="line">            if (USE_CACHE) &#123;</span><br><span class="line">                final int size = getChildCount();</span><br><span class="line">                for (int i = 0; i &lt; size; ++i) &#123;</span><br><span class="line">                    final View child = getChildAt(i);</span><br><span class="line">                    if (child.getVisibility() != GONE) &#123;</span><br><span class="line">                        child.setDrawingCacheEnabled(enabled);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean canScrollHorizontally(int direction) &#123;</span><br><span class="line">        if (mAdapter == null) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        final int width = getClientWidth();</span><br><span class="line">        final int scrollX = getScrollX();</span><br><span class="line">        if (direction &lt; 0) &#123;</span><br><span class="line">            return (scrollX &gt; (int) (width * mFirstOffset));</span><br><span class="line">        &#125; else if (direction &gt; 0) &#123;</span><br><span class="line">            return (scrollX &lt; (int) (width * mLastOffset));</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Tests scrollability within child views of v given a delta of dx.</span><br><span class="line">     *</span><br><span class="line">     * @param v View to test for horizontal scrollability</span><br><span class="line">     * @param checkV Whether the view v passed should itself be checked for scrollability (true),</span><br><span class="line">     *               or just its children (false).</span><br><span class="line">     * @param dx Delta scrolled in pixels</span><br><span class="line">     * @param x X coordinate of the active touch point</span><br><span class="line">     * @param y Y coordinate of the active touch point</span><br><span class="line">     * @return true if child views of v can be scrolled by delta of dx.</span><br><span class="line">     */</span><br><span class="line">    protected boolean canScroll(View v, boolean checkV, int dx, int x, int y) &#123;</span><br><span class="line">        if (v instanceof ViewGroup) &#123;</span><br><span class="line">            final ViewGroup group = (ViewGroup) v;</span><br><span class="line">            final int scrollX = v.getScrollX();</span><br><span class="line">            final int scrollY = v.getScrollY();</span><br><span class="line">            final int count = group.getChildCount();</span><br><span class="line">            // Count backwards - let topmost views consume scroll distance first.</span><br><span class="line">            for (int i = count - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">                // TODO: Add versioned support here for transformed views.</span><br><span class="line">                // This will not work for transformed views in Honeycomb+</span><br><span class="line">                final View child = group.getChildAt(i);</span><br><span class="line">                if (x + scrollX &gt;= child.getLeft() &amp;&amp; x + scrollX &lt; child.getRight() &amp;&amp;</span><br><span class="line">                        y + scrollY &gt;= child.getTop() &amp;&amp; y + scrollY &lt; child.getBottom() &amp;&amp;</span><br><span class="line">                        canScroll(child, true, dx, x + scrollX - child.getLeft(),</span><br><span class="line">                                y + scrollY - child.getTop())) &#123;</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return checkV &amp;&amp; ViewCompat.canScrollHorizontally(v, -dx);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean dispatchKeyEvent(KeyEvent event) &#123;</span><br><span class="line">        // Let the focused view and/or our descendants get the key first</span><br><span class="line">        return super.dispatchKeyEvent(event) || executeKeyEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * You can call this function yourself to have the scroll view perform</span><br><span class="line">     * scrolling from a key event, just as if the event had been dispatched to</span><br><span class="line">     * it by the view hierarchy.</span><br><span class="line">     *</span><br><span class="line">     * @param event The key event to execute.</span><br><span class="line">     * @return Return true if the event was handled, else false.</span><br><span class="line">     */</span><br><span class="line">    public boolean executeKeyEvent(KeyEvent event) &#123;</span><br><span class="line">        boolean handled = false;</span><br><span class="line">        if (event.getAction() == KeyEvent.ACTION_DOWN) &#123;</span><br><span class="line">            switch (event.getKeyCode()) &#123;</span><br><span class="line">                case KeyEvent.KEYCODE_DPAD_LEFT:</span><br><span class="line">                    handled = arrowScroll(FOCUS_LEFT);</span><br><span class="line">                    break;</span><br><span class="line">                case KeyEvent.KEYCODE_DPAD_RIGHT:</span><br><span class="line">                    handled = arrowScroll(FOCUS_RIGHT);</span><br><span class="line">                    break;</span><br><span class="line">                case KeyEvent.KEYCODE_TAB:</span><br><span class="line">                    if (Build.VERSION.SDK_INT &gt;= 11) &#123;</span><br><span class="line">                        // The focus finder had a bug handling FOCUS_FORWARD and FOCUS_BACKWARD</span><br><span class="line">                        // before Android 3.0. Ignore the tab key on those devices.</span><br><span class="line">                        if (KeyEventCompat.hasNoModifiers(event)) &#123;</span><br><span class="line">                            handled = arrowScroll(FOCUS_FORWARD);</span><br><span class="line">                        &#125; else if (KeyEventCompat.hasModifiers(event, KeyEvent.META_SHIFT_ON)) &#123;</span><br><span class="line">                            handled = arrowScroll(FOCUS_BACKWARD);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return handled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean arrowScroll(int direction) &#123;</span><br><span class="line">        View currentFocused = findFocus();</span><br><span class="line">        if (currentFocused == this) &#123;</span><br><span class="line">            currentFocused = null;</span><br><span class="line">        &#125; else if (currentFocused != null) &#123;</span><br><span class="line">            boolean isChild = false;</span><br><span class="line">            for (ViewParent parent = currentFocused.getParent(); parent instanceof ViewGroup;</span><br><span class="line">                    parent = parent.getParent()) &#123;</span><br><span class="line">                if (parent == this) &#123;</span><br><span class="line">                    isChild = true;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (!isChild) &#123;</span><br><span class="line">                // This would cause the focus search down below to fail in fun ways.</span><br><span class="line">                final StringBuilder sb = new StringBuilder();</span><br><span class="line">                sb.append(currentFocused.getClass().getSimpleName());</span><br><span class="line">                for (ViewParent parent = currentFocused.getParent(); parent instanceof ViewGroup;</span><br><span class="line">                        parent = parent.getParent()) &#123;</span><br><span class="line">                    sb.append(&quot; =&gt; &quot;).append(parent.getClass().getSimpleName());</span><br><span class="line">                &#125;</span><br><span class="line">                Log.e(TAG, &quot;arrowScroll tried to find focus based on non-child &quot; +</span><br><span class="line">                        &quot;current focused view &quot; + sb.toString());</span><br><span class="line">                currentFocused = null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        boolean handled = false;</span><br><span class="line"></span><br><span class="line">        View nextFocused = FocusFinder.getInstance().findNextFocus(this, currentFocused,</span><br><span class="line">                direction);</span><br><span class="line">        if (nextFocused != null &amp;&amp; nextFocused != currentFocused) &#123;</span><br><span class="line">            if (direction == View.FOCUS_LEFT) &#123;</span><br><span class="line">                // If there is nothing to the left, or this is causing us to</span><br><span class="line">                // jump to the right, then what we really want to do is page left.</span><br><span class="line">                final int nextLeft = getChildRectInPagerCoordinates(mTempRect, nextFocused).left;</span><br><span class="line">                final int currLeft = getChildRectInPagerCoordinates(mTempRect, currentFocused).left;</span><br><span class="line">                if (currentFocused != null &amp;&amp; nextLeft &gt;= currLeft) &#123;</span><br><span class="line">                    handled = pageLeft();</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    handled = nextFocused.requestFocus();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else if (direction == View.FOCUS_RIGHT) &#123;</span><br><span class="line">                // If there is nothing to the right, or this is causing us to</span><br><span class="line">                // jump to the left, then what we really want to do is page right.</span><br><span class="line">                final int nextLeft = getChildRectInPagerCoordinates(mTempRect, nextFocused).left;</span><br><span class="line">                final int currLeft = getChildRectInPagerCoordinates(mTempRect, currentFocused).left;</span><br><span class="line">                if (currentFocused != null &amp;&amp; nextLeft &lt;= currLeft) &#123;</span><br><span class="line">                    handled = pageRight();</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    handled = nextFocused.requestFocus();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (direction == FOCUS_LEFT || direction == FOCUS_BACKWARD) &#123;</span><br><span class="line">            // Trying to move left and nothing there; try to page.</span><br><span class="line">            handled = pageLeft();</span><br><span class="line">        &#125; else if (direction == FOCUS_RIGHT || direction == FOCUS_FORWARD) &#123;</span><br><span class="line">            // Trying to move right and nothing there; try to page.</span><br><span class="line">            handled = pageRight();</span><br><span class="line">        &#125;</span><br><span class="line">        if (handled) &#123;</span><br><span class="line">            playSoundEffect(SoundEffectConstants.getContantForFocusDirection(direction));</span><br><span class="line">        &#125;</span><br><span class="line">        return handled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private Rect getChildRectInPagerCoordinates(Rect outRect, View child) &#123;</span><br><span class="line">        if (outRect == null) &#123;</span><br><span class="line">            outRect = new Rect();</span><br><span class="line">        &#125;</span><br><span class="line">        if (child == null) &#123;</span><br><span class="line">            outRect.set(0, 0, 0, 0);</span><br><span class="line">            return outRect;</span><br><span class="line">        &#125;</span><br><span class="line">        outRect.left = child.getLeft();</span><br><span class="line">        outRect.right = child.getRight();</span><br><span class="line">        outRect.top = child.getTop();</span><br><span class="line">        outRect.bottom = child.getBottom();</span><br><span class="line"></span><br><span class="line">        ViewParent parent = child.getParent();</span><br><span class="line">        while (parent instanceof ViewGroup &amp;&amp; parent != this) &#123;</span><br><span class="line">            final ViewGroup group = (ViewGroup) parent;</span><br><span class="line">            outRect.left += group.getLeft();</span><br><span class="line">            outRect.right += group.getRight();</span><br><span class="line">            outRect.top += group.getTop();</span><br><span class="line">            outRect.bottom += group.getBottom();</span><br><span class="line"></span><br><span class="line">            parent = group.getParent();</span><br><span class="line">        &#125;</span><br><span class="line">        return outRect;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    boolean pageLeft() &#123;</span><br><span class="line">        if (mCurItem &gt; 0) &#123;</span><br><span class="line">            setCurrentItem(mCurItem-1, true);</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    boolean pageRight() &#123;</span><br><span class="line">        if (mAdapter != null &amp;&amp; mCurItem &lt; (mAdapter.getCount()-1)) &#123;</span><br><span class="line">            setCurrentItem(mCurItem+1, true);</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * We only want the current page that is being shown to be focusable.</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void addFocusables(ArrayList&lt;View&gt; views, int direction, int focusableMode) &#123;</span><br><span class="line">        final int focusableCount = views.size();</span><br><span class="line"></span><br><span class="line">        final int descendantFocusability = getDescendantFocusability();</span><br><span class="line"></span><br><span class="line">        if (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) &#123;</span><br><span class="line">            for (int i = 0; i &lt; getChildCount(); i++) &#123;</span><br><span class="line">                final View child = getChildAt(i);</span><br><span class="line">                if (child.getVisibility() == VISIBLE) &#123;</span><br><span class="line">                    ItemInfo ii = infoForChild(child);</span><br><span class="line">                    if (ii != null &amp;&amp; ii.position == mCurItem) &#123;</span><br><span class="line">                        child.addFocusables(views, direction, focusableMode);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // we add ourselves (if focusable) in all cases except for when we are</span><br><span class="line">        // FOCUS_AFTER_DESCENDANTS and there are some descendants focusable.  this is</span><br><span class="line">        // to avoid the focus search finding layouts when a more precise search</span><br><span class="line">        // among the focusable children would be more interesting.</span><br><span class="line">        if (</span><br><span class="line">            descendantFocusability != FOCUS_AFTER_DESCENDANTS ||</span><br><span class="line">                // No focusable descendants</span><br><span class="line">                (focusableCount == views.size())) &#123;</span><br><span class="line">            // Note that we can&apos;t call the superclass here, because it will</span><br><span class="line">            // add all views in.  So we need to do the same thing View does.</span><br><span class="line">            if (!isFocusable()) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            if ((focusableMode &amp; FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE &amp;&amp;</span><br><span class="line">                    isInTouchMode() &amp;&amp; !isFocusableInTouchMode()) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            if (views != null) &#123;</span><br><span class="line">                views.add(this);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * We only want the current page that is being shown to be touchable.</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void addTouchables(ArrayList&lt;View&gt; views) &#123;</span><br><span class="line">        // Note that we don&apos;t call super.addTouchables(), which means that</span><br><span class="line">        // we don&apos;t call View.addTouchables().  This is okay because a ViewPager</span><br><span class="line">        // is itself not touchable.</span><br><span class="line">        for (int i = 0; i &lt; getChildCount(); i++) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() == VISIBLE) &#123;</span><br><span class="line">                ItemInfo ii = infoForChild(child);</span><br><span class="line">                if (ii != null &amp;&amp; ii.position == mCurItem) &#123;</span><br><span class="line">                    child.addTouchables(views);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * We only want the current page that is being shown to be focusable.</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    protected boolean onRequestFocusInDescendants(int direction,</span><br><span class="line">            Rect previouslyFocusedRect) &#123;</span><br><span class="line">        int index;</span><br><span class="line">        int increment;</span><br><span class="line">        int end;</span><br><span class="line">        int count = getChildCount();</span><br><span class="line">        if ((direction &amp; FOCUS_FORWARD) != 0) &#123;</span><br><span class="line">            index = 0;</span><br><span class="line">            increment = 1;</span><br><span class="line">            end = count;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            index = count - 1;</span><br><span class="line">            increment = -1;</span><br><span class="line">            end = -1;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = index; i != end; i += increment) &#123;</span><br><span class="line">            View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() == VISIBLE) &#123;</span><br><span class="line">                ItemInfo ii = infoForChild(child);</span><br><span class="line">                if (ii != null &amp;&amp; ii.position == mCurItem) &#123;</span><br><span class="line">                    if (child.requestFocus(direction, previouslyFocusedRect)) &#123;</span><br><span class="line">                        return true;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean dispatchPopulateAccessibilityEvent(AccessibilityEvent event) &#123;</span><br><span class="line">        // Dispatch scroll events from this ViewPager.</span><br><span class="line">        if (event.getEventType() == AccessibilityEventCompat.TYPE_VIEW_SCROLLED) &#123;</span><br><span class="line">            return super.dispatchPopulateAccessibilityEvent(event);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Dispatch all other accessibility events from the current page.</span><br><span class="line">        final int childCount = getChildCount();</span><br><span class="line">        for (int i = 0; i &lt; childCount; i++) &#123;</span><br><span class="line">            final View child = getChildAt(i);</span><br><span class="line">            if (child.getVisibility() == VISIBLE) &#123;</span><br><span class="line">                final ItemInfo ii = infoForChild(child);</span><br><span class="line">                if (ii != null &amp;&amp; ii.position == mCurItem &amp;&amp;</span><br><span class="line">                        child.dispatchPopulateAccessibilityEvent(event)) &#123;</span><br><span class="line">                    return true;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected ViewGroup.LayoutParams generateDefaultLayoutParams() &#123;</span><br><span class="line">        return new LayoutParams();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected ViewGroup.LayoutParams generateLayoutParams(ViewGroup.LayoutParams p) &#123;</span><br><span class="line">        return generateDefaultLayoutParams();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected boolean checkLayoutParams(ViewGroup.LayoutParams p) &#123;</span><br><span class="line">        return p instanceof LayoutParams &amp;&amp; super.checkLayoutParams(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ViewGroup.LayoutParams generateLayoutParams(AttributeSet attrs) &#123;</span><br><span class="line">        return new LayoutParams(getContext(), attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    class MyAccessibilityDelegate extends AccessibilityDelegateCompat &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onInitializeAccessibilityEvent(View host, AccessibilityEvent event) &#123;</span><br><span class="line">            super.onInitializeAccessibilityEvent(host, event);</span><br><span class="line">            event.setClassName(ViewPager.class.getName());</span><br><span class="line">            final AccessibilityRecordCompat recordCompat =</span><br><span class="line">                    AccessibilityEventCompat.asRecord(event);</span><br><span class="line">            recordCompat.setScrollable(canScroll());</span><br><span class="line">            if (event.getEventType() == AccessibilityEventCompat.TYPE_VIEW_SCROLLED</span><br><span class="line">                    &amp;&amp; mAdapter != null) &#123;</span><br><span class="line">                recordCompat.setItemCount(mAdapter.getCount());</span><br><span class="line">                recordCompat.setFromIndex(mCurItem);</span><br><span class="line">                recordCompat.setToIndex(mCurItem);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void onInitializeAccessibilityNodeInfo(View host, AccessibilityNodeInfoCompat info) &#123;</span><br><span class="line">            super.onInitializeAccessibilityNodeInfo(host, info);</span><br><span class="line">            info.setClassName(ViewPager.class.getName());</span><br><span class="line">            info.setScrollable(canScroll());</span><br><span class="line">            if (canScrollHorizontally(1)) &#123;</span><br><span class="line">                info.addAction(AccessibilityNodeInfoCompat.ACTION_SCROLL_FORWARD);</span><br><span class="line">            &#125;</span><br><span class="line">            if (canScrollHorizontally(-1)) &#123;</span><br><span class="line">                info.addAction(AccessibilityNodeInfoCompat.ACTION_SCROLL_BACKWARD);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean performAccessibilityAction(View host, int action, Bundle args) &#123;</span><br><span class="line">            if (super.performAccessibilityAction(host, action, args)) &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">            switch (action) &#123;</span><br><span class="line">                case AccessibilityNodeInfoCompat.ACTION_SCROLL_FORWARD: &#123;</span><br><span class="line">                    if (canScrollHorizontally(1)) &#123;</span><br><span class="line">                        setCurrentItem(mCurItem + 1);</span><br><span class="line">                        return true;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; return false;</span><br><span class="line">                case AccessibilityNodeInfoCompat.ACTION_SCROLL_BACKWARD: &#123;</span><br><span class="line">                    if (canScrollHorizontally(-1)) &#123;</span><br><span class="line">                        setCurrentItem(mCurItem - 1);</span><br><span class="line">                        return true;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; return false;</span><br><span class="line">            &#125;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        private boolean canScroll() &#123;</span><br><span class="line">            return (mAdapter != null) &amp;&amp; (mAdapter.getCount() &gt; 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private class PagerObserver extends DataSetObserver &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onChanged() &#123;</span><br><span class="line">            dataSetChanged();</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        public void onInvalidated() &#123;</span><br><span class="line">            dataSetChanged();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Layout parameters that should be supplied for views added to a</span><br><span class="line">     * ViewPager.</span><br><span class="line">     */</span><br><span class="line">    public static class LayoutParams extends ViewGroup.LayoutParams &#123;</span><br><span class="line">        /**</span><br><span class="line">         * true if this view is a decoration on the pager itself and not</span><br><span class="line">         * a view supplied by the adapter.</span><br><span class="line">         */</span><br><span class="line">        public boolean isDecor;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Gravity setting for use on decor views only:</span><br><span class="line">         * Where to position the view page within the overall ViewPager</span><br><span class="line">         * container; constants are defined in &#123;@link android.view.Gravity&#125;.</span><br><span class="line">         */</span><br><span class="line">        public int gravity;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Width as a 0-1 multiplier of the measured pager width</span><br><span class="line">         */</span><br><span class="line">        float widthFactor = 0.f;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * true if this view was added during layout and needs to be measured</span><br><span class="line">         * before being positioned.</span><br><span class="line">         */</span><br><span class="line">        boolean needsMeasure;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Adapter position this view is for if !isDecor</span><br><span class="line">         */</span><br><span class="line">        int position;</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * Current child index within the ViewPager that this view occupies</span><br><span class="line">         */</span><br><span class="line">        int childIndex;</span><br><span class="line"></span><br><span class="line">        public LayoutParams() &#123;</span><br><span class="line">            super(FILL_PARENT, FILL_PARENT);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public LayoutParams(Context context, AttributeSet attrs) &#123;</span><br><span class="line">            super(context, attrs);</span><br><span class="line"></span><br><span class="line">            final TypedArray a = context.obtainStyledAttributes(attrs, LAYOUT_ATTRS);</span><br><span class="line">            gravity = a.getInteger(0, Gravity.TOP);</span><br><span class="line">            a.recycle();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static class ViewPositionComparator implements Comparator&lt;View&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(View lhs, View rhs) &#123;</span><br><span class="line">            final LayoutParams llp = (LayoutParams) lhs.getLayoutParams();</span><br><span class="line">            final LayoutParams rlp = (LayoutParams) rhs.getLayoutParams();</span><br><span class="line">            if (llp.isDecor != rlp.isDecor) &#123;</span><br><span class="line">                return llp.isDecor ? 1 : -1;</span><br><span class="line">            &#125;</span><br><span class="line">            return llp.position - rlp.position;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>呃……这么长，贴出来唬人的。具体看setCurrentItem方法里的这一段：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">final boolean dispatchSelected = mCurItem != item;</span><br><span class="line"></span><br><span class="line">     if (mFirstLayout) &#123;</span><br><span class="line">         // We don&apos;t have any idea how big we are yet and shouldn&apos;t have any pages either.</span><br><span class="line">         // Just set things up and let the pending layout handle things.</span><br><span class="line">         mCurItem = item;</span><br><span class="line">         if (dispatchSelected) &#123;</span><br><span class="line">             dispatchOnPageSelected(item);</span><br><span class="line">         &#125;</span><br><span class="line">         requestLayout();</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">         populate(item);</span><br><span class="line">         scrollToItem(item, smoothScroll, velocity, dispatchSelected);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<p>　　这里的item就是在setCurrentItem(item)里面传进来的要跳转到第几页的，然后用这个item与mCurItem 比较，mCurItem 表示当前选中页item，在给ViewPager 设置适配器的时候初始化为0.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private int mCurItem;   // Index of currently displayed page.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public void setAdapter(PagerAdapter adapter) &#123;</span><br><span class="line">     if (mAdapter != null) &#123;</span><br><span class="line">         mAdapter.setViewPagerObserver(null);</span><br><span class="line">         mAdapter.startUpdate(this);</span><br><span class="line">         for (int i = 0; i &lt; mItems.size(); i++) &#123;</span><br><span class="line">             final ItemInfo ii = mItems.get(i);</span><br><span class="line">             mAdapter.destroyItem(this, ii.position, ii.object);</span><br><span class="line">         &#125;</span><br><span class="line">         mAdapter.finishUpdate(this);</span><br><span class="line">         mItems.clear();</span><br><span class="line">         removeNonDecorViews();</span><br><span class="line">         mCurItem = 0;//这里初始化为0</span><br><span class="line">         scrollTo(0, 0);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<p>　　如果我传进来的item也是0，则与mCurItem 相等，dispatchSelected 为false，就不会走  dispatchOnPageSelected(item);这个方法，不做任何操作。所以我在初始化的时候设置 vp_content.setCurrentItem(0)就没有任何效果。所以我就先setCurrentItem(2);再 setCurrentItem(0);<br>　　暂时不知道有没有更好的解决方法。
　
　　
　　</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"># Android</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/23/ScrollView嵌套ListView冲突高度显示不全问题/" rel="next" title="ScrollView嵌套ListView冲突高度显示不全问题">
                <i class="fa fa-chevron-left"></i> ScrollView嵌套ListView冲突高度显示不全问题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/23/报错Binary XML file line #  Error inflating class/" rel="prev" title="报错Binary XML file line">
                报错Binary XML file line <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/mouse.png"
                alt="一个写代码的胖子" />
            
              <p class="site-author-name" itemprop="name">一个写代码的胖子</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">38</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">一个写代码的胖子</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Vo8fQeNlOTFwiaQeECQhhVjE-gzGzoHsz", "liiHn9SJP2XlYC5J2ghp70L3");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
